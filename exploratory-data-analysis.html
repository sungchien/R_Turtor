<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 利用R語言進行探索性資料分析 | R語言課程講義</title>
  <meta name="description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 利用R語言進行探索性資料分析 | R語言課程講義" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 利用R語言進行探索性資料分析 | R語言課程講義" />
  
  <meta name="twitter:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  

<meta name="author" content="林頌堅" />


<meta name="date" content="2019-11-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-visualization.html">
<link rel="next" href="data-mining.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R語言課程講義</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R語言的基本概念與語法</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e8aab2e7a88be7b0a1e4bb8b"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5adb8e7bf92e79baee6a899"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.1</b> R語言的基本概念</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.2</b> R語言的運算</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3</b> R語言的基本資料型態</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#section-1.3.1"><i class="fa fa-check"></i><b>1.3.1</b> 數值資料型態</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#section-1.3.2"><i class="fa fa-check"></i><b>1.3.2</b> 文字資料型態</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#section-1.3.3"><i class="fa fa-check"></i><b>1.3.3</b> 邏輯資料型態</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#factor"><i class="fa fa-check"></i><b>1.3.4</b> factor資料型態</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.4</b> R語言的特殊資料型態</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#vector"><i class="fa fa-check"></i><b>1.4.1</b> vector</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#matrix"><i class="fa fa-check"></i><b>1.4.2</b> matrix</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#list"><i class="fa fa-check"></i><b>1.4.3</b> list</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>1.4.4</b> data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5b08fe7b590"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5bbb6e4bcb8e6809de88083"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>2</b> 運用R語言進行資料處理</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> 預備工作</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 設定工作目錄</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> 讀入檔案資料</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.1"><i class="fa fa-check"></i><b>2.2.1</b> 讀入空氣品質指標資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.2"><i class="fa fa-check"></i><b>2.2.2</b> 瀏覽讀入的資料</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> 資料整理</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#aqina"><i class="fa fa-check"></i><b>2.3.1</b> 去除AQI為NA的資料紀錄</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#variable"><i class="fa fa-check"></i><b>2.3.2</b> Variable資料型態變更</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4"><i class="fa fa-check"></i><b>2.4</b> 資料分析</a><ul>
<li class="chapter" data-level="2.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.1"><i class="fa fa-check"></i><b>2.4.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.2"><i class="fa fa-check"></i><b>2.4.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.3"><i class="fa fa-check"></i><b>2.4.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.4"><i class="fa fa-check"></i><b>2.4.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> 程式存檔</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tidyverse簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1</b> tidy資料格式簡介</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.1</b> tidy資料格式的特徵</a></li>
<li class="chapter" data-level="3.1.2" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.2</b> tidy資料格式的優點</a></li>
<li class="chapter" data-level="3.1.3" data-path="tidyverse.html"><a href="tidyverse.html#wide-format-vs.long-format"><i class="fa fa-check"></i><b>3.1.3</b> wide format vs. long format</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.2</b> tidyverse套件</a></li>
<li class="chapter" data-level="3.3" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data-format"><i class="fa fa-check"></i><b>3.3</b> tidy data format的資料分析方法</a><ul>
<li class="chapter" data-level="3.3.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="3.3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.3.2</b> 使用tidyverse套件的函數</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4</b> 資料整理</a></li>
<li class="chapter" data-level="3.5" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5</b> 資料分析</a><ul>
<li class="chapter" data-level="3.5.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="3.5.2" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="3.5.3" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="3.5.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> 資料視覺化</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1"><i class="fa fa-check"></i><b>4.1</b> 資訊視覺化簡介</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1.1"><i class="fa fa-check"></i><b>4.1.1</b> 視覺化的應用</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1.2"><i class="fa fa-check"></i><b>4.1.2</b> 應用圖形呈現各種問題</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>4.2</b> R語言的資料視覺化工具</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.1</b> ggplot2的運作概念</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualization.html"><a href="data-visualization.html#aesthetics"><i class="fa fa-check"></i><b>4.2.2</b> Aesthetics上幾種常用的資料編碼方式</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-geometrics"><i class="fa fa-check"></i><b>4.2.3</b> ggplot2上幾種常用的圖表類型 (Geometrics)</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.4</b> 使用ggplot2套件</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3"><i class="fa fa-check"></i><b>4.3</b> 以資料視覺化的方式進行資料探索</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i><b>4.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3.2"><i class="fa fa-check"></i><b>4.3.2</b> 問題</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#section-4.4"><i class="fa fa-check"></i><b>4.4</b> 利用直方圖呈現資料的分布情形</a></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#section-4.5"><i class="fa fa-check"></i><b>4.5</b> 利用長條圖進行資料之間的比較</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#section-4.6"><i class="fa fa-check"></i><b>4.6</b> 利用散佈圖呈現兩個數值之間的關係</a></li>
<li class="chapter" data-level="4.7" data-path="data-visualization.html"><a href="data-visualization.html#section-4.7"><i class="fa fa-check"></i><b>4.7</b> 使用盒狀圖比較多個群體的分布情形</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization.html"><a href="data-visualization.html#section-4.8"><i class="fa fa-check"></i><b>4.8</b> 利用並列的多個圖表進行比較</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>5</b> 利用R語言進行探索性資料分析</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-8"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-9"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.1"><i class="fa fa-check"></i><b>5.1</b> 探索性資料分析是什麼？</a></li>
<li class="chapter" data-level="5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.2"><i class="fa fa-check"></i><b>5.2</b> 以環保署日空氣品質指標開放資料為例進行探索性資料分析</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-mining.html"><a href="data-mining.html"><i class="fa fa-check"></i><b>6</b> 資料探勘</a><ul>
<li class="chapter" data-level="" data-path="data-mining.html"><a href="data-mining.html#-10"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-mining.html"><a href="data-mining.html#-11"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="6.1" data-path="data-mining.html"><a href="data-mining.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 資料探勘的定義</a></li>
<li class="chapter" data-level="6.2" data-path="data-mining.html"><a href="data-mining.html#section-6.2"><i class="fa fa-check"></i><b>6.2</b> 資料探勘的步驟</a></li>
<li class="chapter" data-level="6.3" data-path="data-mining.html"><a href="data-mining.html#section-6.3"><i class="fa fa-check"></i><b>6.3</b> 資料探勘的分類</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html"><i class="fa fa-check"></i><b>7</b> 利用R語言進行非監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-12"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-13"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="7.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 集群分析</a></li>
<li class="chapter" data-level="7.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2"><i class="fa fa-check"></i><b>7.2</b> 以進出站人數統計資料對臺鐵主要車站進行集群分析</a><ul>
<li class="chapter" data-level="7.2.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.1"><i class="fa fa-check"></i><b>7.2.1</b> 載入相關套件</a></li>
<li class="chapter" data-level="7.2.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.2"><i class="fa fa-check"></i><b>7.2.2</b> 選取資料</a></li>
<li class="chapter" data-level="7.2.3" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.3"><i class="fa fa-check"></i><b>7.2.3</b> 資料的清除與整理等前處理</a></li>
<li class="chapter" data-level="7.2.4" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.4"><i class="fa fa-check"></i><b>7.2.4</b> 產生站點資料特徵</a></li>
<li class="chapter" data-level="7.2.5" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.5"><i class="fa fa-check"></i><b>7.2.5</b> 維度縮減</a></li>
<li class="chapter" data-level="7.2.6" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.6"><i class="fa fa-check"></i><b>7.2.6</b> 將站點依據彼此距離視覺化</a></li>
<li class="chapter" data-level="7.2.7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.7"><i class="fa fa-check"></i><b>7.2.7</b> 站點集群</a></li>
<li class="chapter" data-level="7.2.8" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.8"><i class="fa fa-check"></i><b>7.2.8</b> 結果的解釋</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html"><i class="fa fa-check"></i><b>8</b> 利用R語言進行監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-14"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-15"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="8.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1"><i class="fa fa-check"></i><b>8.1</b> 監督式機器學習</a><ul>
<li class="chapter" data-level="8.1.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1.1"><i class="fa fa-check"></i><b>8.1.1</b> 分類</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#tmdb"><i class="fa fa-check"></i><b>8.2</b> TMDB電影評分預測</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>8.2.1</b> 載入tidyverse套件</a></li>
<li class="chapter" data-level="8.2.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.2.2"><i class="fa fa-check"></i><b>8.2.2</b> 讀入資料</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> 資料處理與特徵抽取</a><ul>
<li class="chapter" data-level="8.3.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.1"><i class="fa fa-check"></i><b>8.3.1</b> 資料的清除與整理</a></li>
<li class="chapter" data-level="8.3.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.2"><i class="fa fa-check"></i><b>8.3.2</b> 轉換資料為有效描述和預測的特徵</a></li>
<li class="chapter" data-level="8.3.3" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>8.3.3</b> 建立一個data frame用來比較各種分類演算法</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#k-nearest-neightbors"><i class="fa fa-check"></i><b>8.4</b> 進行K-Nearest Neightbors分類</a></li>
<li class="chapter" data-level="8.5" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#naive-bayes"><i class="fa fa-check"></i><b>8.5</b> 進行Naive Bayes演算法分類</a></li>
<li class="chapter" data-level="8.6" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> 進行支持向量機分類</a></li>
<li class="chapter" data-level="8.7" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.7"><i class="fa fa-check"></i><b>8.7</b> 進行決策樹分類</a></li>
<li class="chapter" data-level="8.8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.8"><i class="fa fa-check"></i><b>8.8</b> 進行隨機森林分類</a></li>
<li class="chapter" data-level="8.9" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.9"><i class="fa fa-check"></i><b>8.9</b> 進行梯度提升機分類</a></li>
<li class="chapter" data-level="8.10" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.10"><i class="fa fa-check"></i><b>8.10</b> 比較各分類器的結果</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R語言課程講義</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exploratory_data_analysis" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> 利用R語言進行探索性資料分析</h1>
<div id="-8" class="section level2 unnumbered">
<h2>課程簡介</h2>
<div id="-9" class="section level3 unnumbered">
<h3>課程簡介</h3>
<p>本次課程一方面介紹資料科學中相當重要的探索性資料分析(Exploratory Data Analysis)，另一方面可以視為前4次課程的總結，亦即利用前四次課程學習到的R語言資料處理與分析以及資訊視覺化技術來進行探索性資料分析。課程包括以下的內容：</p>
<ul>
<li>探索性資料分析的意義與概念</li>
<li>運用R語言進行探索性資料分析</li>
</ul>
</div>
<div id="-4" class="section level3 unnumbered">
<h3>學習目標</h3>
<p>運用探索性資料分析</p>
<ul>
<li>了解資料的型態、意義與範圍</li>
<li>處理資料的錯誤，包括遺漏值、異常值</li>
<li>將原始資料轉換方便有效處理的資料，例如資料彙整或Variables的合併</li>
<li>形成問題的假設</li>
</ul>
</div>
</div>
<div id="section-5.1" class="section level2">
<h2><span class="header-section-number">5.1</span> 探索性資料分析是什麼？</h2>
<p>探索性資料分析是指利用描述統計和圖形表示等方式對資料進行初步調查，目的是發現模式(patterns)，偵測異常(anomalies)以及檢驗假設(assumptions)。</p>
<p>目前並沒有十分嚴格的探索性資料分析流程。但大部分的資料可以依據以下的步驟進行：</p>
<ol style="list-style-type: decimal">
<li><p>發現資料中每個Variable的型態與意義。找出或轉換了解問題所需的資料Variables。</p></li>
<li><p>資料中是否有錯誤，例如資料重複或輸入錯誤？發生在那些Variable上？如何處理這些錯誤？</p></li>
<li><p>資料中是否有遺漏值 (missing values)，發生在那些Variable上？如何處理這些遺漏值？</p></li>
<li><p>根據資料的分布範圍，哪些是與其他資料大不相同的異常值(outliers)？這些異常值要如何處理？</p></li>
<li><p>原始資料是否需要彙整？換句說，將以一筆資料<strong>代表</strong>一群相關的Observations。如何代表？</p></li>
<li><p>Variables有無需要進行合併？如何進行合併？</p></li>
<li><p>形成問題的假設，從資料中發展出想要了解的問題。</p></li>
<li><p>有必要的話，重複上面的各個步驟。</p></li>
</ol>
</div>
<div id="section-5.2" class="section level2">
<h2><span class="header-section-number">5.2</span> 以環保署日空氣品質指標開放資料為例進行探索性資料分析</h2>
<p>事實上，利用<a href="data-manipulation.html#data_manipulation">運用R語言進行資料處理</a>、<a href="tidyverse.html#tidyverse">Tidyverse簡介</a>和<a href="data-visualization.html#data_visualization">資料視覺化</a>等前面幾個章節的內容，已經能夠做到相當不錯的探索性資料分析。下面我們從<a href="https://opendata.epa.gov.tw/">環保署資料開放平台</a>上取得從資料開放以來的<a href="https://opendata.epa.gov.tw/Data/Contents/ATM00679/">日空氣品質指標</a>。請同學利用前面幾個章節的技巧進行探索性資料分析。</p>
<ol start="0" style="list-style-type: decimal">
<li>讀取<a href="AQI_data_2019_07_26.csv">日空氣品質指標檔案</a></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;AQI_data_2019_07_26.csv&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<ol style="list-style-type: decimal">
<li>發現資料中每個Variable的型態與意義</li>
</ol>
<p>進行資料分析時，通常拿到資料後，第一件事情便是研究有多少筆資料？由哪些Variables構成？各個Variables的資料型態是什麼？資料的樣貌為何？以便對於資料的範圍與意義有一個概括的認識。</p>
<p>1.1 查看資料的Observation和Variable數量 (請寫出程式碼)</p>
<pre><code>## [1] 62852    11</code></pre>
<p>1.2 查看Variables的資料型態 (請寫出程式碼)</p>
<pre><code>## &#39;data.frame&#39;:    62852 obs. of  11 variables:
##  $ SiteId      : int  1 2 4 5 6 7 8 9 10 11 ...
##  $ SiteName    : chr  &quot;基隆&quot; &quot;汐止&quot; &quot;新店&quot; &quot;土城&quot; ...
##  $ MonitorDate : chr  &quot;2019-07-25&quot; &quot;2019-07-25&quot; &quot;2019-07-25&quot; &quot;2019-07-25&quot; ...
##  $ AQI         : int  47 101 67 67 64 51 46 40 33 43 ...
##  $ SO2SubIndex : int  6 14 7 6 11 26 7 10 7 4 ...
##  $ COSubIndex  : int  3 6 5 6 6 7 7 3 6 5 ...
##  $ O3SubIndex  : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ PM10SubIndex: int  27 33 28 31 29 31 27 23 25 27 ...
##  $ NO2SubIndex : int  14 25 21 25 24 27 21 22 21 21 ...
##  $ O38SubIndex : int  47 101 67 67 64 51 46 40 29 37 ...
##  $ PM25SubIndex: int  44 57 45 54 59 49 44 23 33 43 ...</code></pre>
<p>1.3 查看前後各五筆資料 (請寫出程式碼)</p>
<pre><code>## Warning: The `printer` argument is deprecated as of rlang 0.3.0.
## This warning is displayed once per session.</code></pre>
<pre><code>##    SiteId SiteName MonitorDate AQI SO2SubIndex COSubIndex O3SubIndex
## 1       1     基隆  2019-07-25  47           6          3         NA
## 2       2     汐止  2019-07-25 101          14          6         NA
## 3       4     新店  2019-07-25  67           7          5         NA
## 4       5     土城  2019-07-25  67           6          6         NA
## 5       6     板橋  2019-07-25  64          11          6         NA
## 6      75     馬祖  2017-04-15  65           7          5         NA
## 7      77     金門  2017-04-15 126          19          6         NA
## 8      78     馬公  2017-04-15  45           3          5         NA
## 9      80     關山  2017-04-15  22           1         NA         NA
## 10     83     麥寮  2017-04-15 127          14         NA         NA
##    PM10SubIndex NO2SubIndex O38SubIndex PM25SubIndex
## 1            27          14          47           44
## 2            33          25         101           57
## 3            28          21          67           45
## 4            31          25          67           54
## 5            29          24          64           59
## 6            47          20          47           65
## 7            76          69          20          126
## 8            28          14          45           38
## 9            15           6          19           22
## 10           68          20          NA          127</code></pre>
<p>1.4 根據以上資料，說明中每個Variable的範圍與意義</p>
<hr />
<ol start="2" style="list-style-type: decimal">
<li>檢查與修正資料中的錯誤</li>
</ol>
<p>原始資料中通常會發生多餘、缺少或誤植等可能的錯誤。在這個步驟中，盡可發去發掘可能的錯誤，然後設法修正。</p>
<p>2.1 資料是否有重複？同一日期同一偵測站應只有一筆Observation，列出重複的資料</p>
<pre><code>## # A tibble: 77 x 3
## # Groups:   MonitorDate [2]
##    MonitorDate SiteName count
##    &lt;chr&gt;       &lt;chr&gt;    &lt;int&gt;
##  1 2018-07-18  二林         2
##  2 2018-07-18  三重         2
##  3 2018-07-18  三義         2
##  4 2018-07-18  土城         2
##  5 2018-07-18  士林         2
##  6 2018-07-18  大同         2
##  7 2018-07-18  大里         2
##  8 2018-07-18  大園         2
##  9 2018-07-18  大寮         2
## 10 2018-07-18  小港         2
## # ... with 67 more rows</code></pre>
<p>2.2 刪除重複資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">distinct</span>(df)</code></pre></div>
<p>2.3 檢視所有的偵測站名稱(SiteName)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(df<span class="op">$</span>SiteName)</code></pre></div>
<pre><code>##  [1] &quot;基隆&quot;   &quot;汐止&quot;   &quot;新店&quot;   &quot;土城&quot;   &quot;板橋&quot;   &quot;新莊&quot;   &quot;菜寮&quot;  
##  [8] &quot;林口&quot;   &quot;淡水&quot;   &quot;士林&quot;   &quot;中山&quot;   &quot;萬華&quot;   &quot;古亭&quot;   &quot;松山&quot;  
## [15] &quot;大同&quot;   &quot;大園&quot;   &quot;平鎮&quot;   &quot;龍潭&quot;   &quot;湖口&quot;   &quot;竹東&quot;   &quot;新竹&quot;  
## [22] &quot;頭份&quot;   &quot;苗栗&quot;   &quot;三義&quot;   &quot;豐原&quot;   &quot;沙鹿&quot;   &quot;大里&quot;   &quot;忠明&quot;  
## [29] &quot;西屯&quot;   &quot;彰化&quot;   &quot;線西&quot;   &quot;二林&quot;   &quot;南投&quot;   &quot;斗六&quot;   &quot;崙背&quot;  
## [36] &quot;新港&quot;   &quot;朴子&quot;   &quot;臺西&quot;   &quot;嘉義&quot;   &quot;新營&quot;   &quot;善化&quot;   &quot;安南&quot;  
## [43] &quot;臺南&quot;   &quot;美濃&quot;   &quot;橋頭&quot;   &quot;仁武&quot;   &quot;鳳山&quot;   &quot;大寮&quot;   &quot;林園&quot;  
## [50] &quot;楠梓&quot;   &quot;左營&quot;   &quot;前金&quot;   &quot;前鎮&quot;   &quot;小港&quot;   &quot;屏東&quot;   &quot;潮州&quot;  
## [57] &quot;恆春&quot;   &quot;臺東&quot;   &quot;花蓮&quot;   &quot;陽明&quot;   &quot;宜蘭&quot;   &quot;冬山&quot;   &quot;三重&quot;  
## [64] &quot;中壢&quot;   &quot;竹山&quot;   &quot;永和&quot;   &quot;復興&quot;   &quot;埔里&quot;   &quot;馬祖&quot;   &quot;金門&quot;  
## [71] &quot;馬公&quot;   &quot;關山&quot;   &quot;麥寮&quot;   &quot;富貴角&quot; &quot;萬里&quot;   &quot;觀音&quot;   &quot;桃園&quot;</code></pre>
<p>2.4 查看資料筆數最少的5個偵測站</p>
<pre><code>## # A tibble: 5 x 2
##   SiteName count
##   &lt;chr&gt;    &lt;int&gt;
## 1 富貴角     590
## 2 萬華       800
## 3 朴子       810
## 4 恆春       813
## 5 桃園       813</code></pre>
<p>2.5 觀察上面的結果，有什麼想法？如何驗證妳/你的想法？</p>
<p>2.6 將監測日期(MonitorDate)的資料型態改成Date</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">mutate</span>(df, <span class="dt">MonitorDate=</span><span class="kw">as.Date</span>(MonitorDate))</code></pre></div>
<p>2.7 列出資料量最少的5個監測日期</p>
<pre><code>## # A tibble: 5 x 2
##   MonitorDate count
##   &lt;date&gt;      &lt;int&gt;
## 1 2019-07-07     73
## 2 2017-07-01     74
## 3 2017-07-02     74
## 4 2017-07-31     74
## 5 2017-11-18     74</code></pre>
<p>2.7 利用折線圖畫出每一天紀錄中的偵測站數量</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(MonitorDate) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>MonitorDate, <span class="dt">y=</span>count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks=</span><span class="st">&quot;1 month&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">80</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">5</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;偵測日期&quot;</span>, <span class="dt">y=</span><span class="st">&quot;偵測站數量&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">60</span>, <span class="dt">hjust=</span><span class="dv">1</span>),
        <span class="dt">panel.background =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>2.8 看了上面的數據和每天的偵測站數量統計折線圖，有什麼想法？如何驗證妳/你的想法？</p>
<hr />
<ol start="3" style="list-style-type: decimal">
<li>處理資料的遺漏值</li>
</ol>
<p>原始資料中可能會有若干資料在一些Variables上沒有值，R語言裡這些資料的值以<code>NA</code>(Not Available)的形式存在。在進行深入的資料分析與處理前，這些NA需要先處理。如果在資料充足的情形下，最簡單的處理方式是將包含NA值的資料刪除。但若是資料不足，則需要設法以其他值取代，例如character型態的Variable會將出現NA的資料值設為空白<code>&quot;&quot;</code>，numeric型態則設為0，或是其他資料值的平均值(mean)。</p>
<p>3.1 利用<code>summary()</code>檢視所有variables的資料情形，瞭解資料的分範圍和有多少的NA</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df)</code></pre></div>
<pre><code>##      SiteId        SiteName          MonitorDate              AQI        
##  Min.   : 1.00   Length:62775       Min.   :2017-04-15   Min.   :  1.00  
##  1st Qu.:20.00   Class :character   1st Qu.:2017-11-10   1st Qu.: 38.00  
##  Median :39.00   Mode  :character   Median :2018-06-04   Median : 54.00  
##  Mean   :39.46                      Mean   :2018-06-03   Mean   : 62.95  
##  3rd Qu.:59.00                      3rd Qu.:2018-12-25   3rd Qu.: 81.00  
##  Max.   :84.00                      Max.   :2019-07-25   Max.   :225.00  
##                                                          NA&#39;s   :15      
##   SO2SubIndex        COSubIndex       O3SubIndex     PM10SubIndex   
##  Min.   :  0.000   Min.   : 0.000   Min.   :101.0   Min.   :  5.00  
##  1st Qu.:  4.000   1st Qu.: 3.000   1st Qu.:104.0   1st Qu.: 23.00  
##  Median :  7.000   Median : 5.000   Median :107.0   Median : 33.00  
##  Mean   :  8.207   Mean   : 5.561   Mean   :109.8   Mean   : 36.84  
##  3rd Qu.: 10.000   3rd Qu.: 7.000   3rd Qu.:114.0   3rd Qu.: 48.00  
##  Max.   :133.000   Max.   :71.000   Max.   :145.0   Max.   :225.00  
##  NA&#39;s   :62        NA&#39;s   :4941     NA&#39;s   :62697   NA&#39;s   :1479    
##   NO2SubIndex     O38SubIndex      PM25SubIndex   
##  Min.   : 0.00   Min.   :  0.00   Min.   :  3.00  
##  1st Qu.:13.00   1st Qu.: 31.00   1st Qu.: 32.00  
##  Median :20.00   Median : 40.00   Median : 51.00  
##  Mean   :21.34   Mean   : 49.05   Mean   : 55.68  
##  3rd Qu.:28.00   3rd Qu.: 54.00   3rd Qu.: 73.00  
##  Max.   :97.00   Max.   :221.00   Max.   :174.00  
##  NA&#39;s   :51      NA&#39;s   :9048     NA&#39;s   :718</code></pre>
<p>3.2 觀察上面的結果，你對這個資料的遺漏值(NA)有什麼想法？如何驗證妳/你的想法？</p>
<p>3.3 列出AQI為NA的資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(df, <span class="kw">is.na</span>(AQI))</code></pre></div>
<pre><code>##    SiteId SiteName MonitorDate AQI SO2SubIndex COSubIndex O3SubIndex
## 1      80     關山  2019-07-25  NA          NA         NA         NA
## 2      80     關山  2019-07-24  NA          NA         NA         NA
## 3      36     南投  2019-07-12  NA          NA         NA         NA
## 4      36     南投  2019-07-11  NA          NA         NA         NA
## 5      52     林園  2019-07-11  NA          NA         NA         NA
## 6      60     潮州  2019-07-04  NA          NA         NA         NA
## 7      44     善化  2019-07-03  NA          NA         NA         NA
## 8      37     斗六  2019-06-26  NA          NA         NA         NA
## 9      61     恆春  2019-06-17  NA          NA         NA         NA
## 10     61     恆春  2019-06-13  NA          NA         NA         NA
## 11     49     仁武  2018-08-22  NA          NA         NA         NA
## 12     18     大園  2018-03-04  NA          NA         NA         NA
## 13     66     冬山  2017-10-28  NA          NA         NA         NA
## 14     11     士林  2017-07-25  NA          NA         NA         NA
## 15     41     臺西  2017-07-09  NA          NA         NA         NA
##    PM10SubIndex NO2SubIndex O38SubIndex PM25SubIndex
## 1            NA          NA          NA           NA
## 2            NA          NA          NA           NA
## 3            NA          NA          NA           NA
## 4            NA          NA          NA           NA
## 5            NA          NA          NA           NA
## 6            NA          NA          NA           NA
## 7            NA          NA          NA           NA
## 8            NA          NA          NA           NA
## 9            NA          NA          NA           NA
## 10           NA          NA          NA           NA
## 11           NA          NA          NA           NA
## 12           NA          NA          NA           NA
## 13           NA          NA          NA           NA
## 14           NA          NA          NA           NA
## 15           NA          NA          NA           NA</code></pre>
<p>3.4 刪除AQI為NA的資料</p>
<hr />
<ol start="4" style="list-style-type: decimal">
<li>異常值是指資料中落在可能的分布範圍以外的值，也就是太大或太小的資料。在進行某些分析時，這些資料會嚴重影響運算，例如計算資料的平均值。</li>
</ol>
<p>4.1 利用直方圖觀察AQI的分布範圍</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(df) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x=</span>AQI), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">250</span>, <span class="dv">25</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">250</span>, <span class="dv">25</span>), <span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">250</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y=</span><span class="st">&quot;天數&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>4.2 利用盒狀圖觀察AQI的分布範圍。在盒狀圖上，盒子的上下邊緣表示資料的3/4(Q3)和1/4(Q1)，因此整個盒子的高便是資料的IQR(interquartile range)，另外上下縱線的端點，在沒有縱線外的點之情況下，為資料的最大值和最小值，但如果縱線外有點，端點代表資料的Q3+1.5IQR和Q1-1.5IQR。換言之，縱線外的點表示這些資料的值大於Q3+1.5IQR或是小於Q1-1.5IQR。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(df) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="dv">1</span>, <span class="dt">y=</span>AQI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),
        <span class="dt">panel.background =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>4.3 觀察上面的直方圖與盒鬚圖，你對這個資料的異常值有什麼想法？如何驗證妳/你的想法？</p>
<p>4.4 列出AQI值大於150的資料</p>
<pre><code>##    SiteId SiteName MonitorDate AQI SO2SubIndex COSubIndex O3SubIndex
## 1      28     豐原  2019-07-17 207           9          6        114
## 2      72     埔里  2019-07-17 214           6          6        111
## 3      52     林園  2018-11-14 209          26          7        110
## 4      48     橋頭  2018-10-30 202          10          7         NA
## 5      52     林園  2018-10-30 207          26          8        109
## 6      54     左營  2018-10-30 210          11          8        110
## 7      75     馬祖  2018-10-30 216           9          5        105
## 8      49     仁武  2018-10-07 203          13          6         NA
## 9      53     楠梓  2018-10-07 201           9          6         NA
## 10     54     左營  2018-10-07 201           9          7         NA
## 11     75     馬祖  2018-04-26 205           7          5         NA
## 12     41     臺西  2018-04-07 225          13         NA         NA
## 13     60     潮州  2017-11-28 206          23          8        125
## 14     75     馬祖  2017-11-03 221          10          8        116
## 15      4     新店  2017-09-20 203          26          6        115
## 16     14     古亭  2017-09-20 201          30          8        131
## 17     20     平鎮  2017-09-19 212          13          7        116
## 18     21     龍潭  2017-09-19 213          13          7        112
## 19     52     林園  2017-04-30 210          16          5         NA
## 20     54     左營  2017-04-29 202          19          7         NA
## 21     59     屏東  2017-04-25 206          21          9        119
## 22     60     潮州  2017-04-25 207          16          7         NA
##    PM10SubIndex NO2SubIndex O38SubIndex PM25SubIndex
## 1            50          17         207           97
## 2            50          12         214           89
## 3            81          38         209          130
## 4            93          35         202          142
## 5            95          36         207          141
## 6            96          37         210          112
## 7            64          11         216           95
## 8            66          19         203          104
## 9            71          20         201          137
## 10           74          27         201          119
## 11           65          12         205          116
## 12          225          17          NA          105
## 13           92          28         206          152
## 14           64          11         221          118
## 15           44          38         203           98
## 16           42          47         201           87
## 17           59          48         212           94
## 18           60          36         213          105
## 19           41          15         210           94
## 20           59          40         202           82
## 21           70          35         206          141
## 22           78          16         207          125</code></pre>
<hr />
<ol start="5" style="list-style-type: decimal">
<li>原始資料的彙整</li>
</ol>
<p>取得的原始資料可能規模相當大。充足的資料有助於更有效地訓練分析模型，但在探索性資料分析的階段，規模過於龐大的資料不易於觀察與形成假設。此時，可以將多筆資料彙整，以多筆資料中的某些特別的值代替所有的資料，簡化資料的複雜程度，以便進行觀察。</p>
<p>5.1 利用折線圖繪製每個偵測站的AQI變化，以新店站為例。這個折線圖由於使用了每天的AQI資料，規模相當龐大，而且小範圍內的資料變化劇烈，並不容易觀察資料的變化情形。 <img src="bookdown-demo_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>5.2 觀察時並不需要過於仔細的資料，可以將各偵測站每個月的資料彙整成一筆</p>
<p>5.3 載入lubridate套件處理日期資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)</code></pre></div>
<p>5.4 增加年度欄位，利用盒狀圖，比較同一偵測站在不同年度的空氣品質</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(df, SiteName<span class="op">==</span><span class="st">&quot;新店&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Year=</span><span class="kw">as.factor</span>(<span class="kw">year</span>(MonitorDate))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Year, <span class="dt">y=</span>AQI, <span class="dt">color=</span>Year)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">250</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">250</span>, <span class="dv">25</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;navyblue&quot;</span>, <span class="st">&quot;firebrick&quot;</span>, <span class="st">&quot;forestgreen&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;lightblue&quot;</span>, <span class="st">&quot;lightpink&quot;</span>, <span class="st">&quot;seagreen&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;監測年度&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>5.5 增加年以及月分兩個欄位,依據偵測站名稱和年與月分分群，計算各偵測站每個月AQI的中位數以及資料的第10百分位數(p10)和第90百分位數(p90)。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ym_df &lt;-<span class="st"> </span><span class="kw">mutate</span>(df, <span class="dt">YearMonth=</span><span class="kw">floor_date</span>(MonitorDate, <span class="st">&quot;month&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(SiteName, YearMonth) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">AQI_median =</span> <span class="kw">median</span>(AQI),
            <span class="dt">AQI_p10=</span><span class="kw">quantile</span>(AQI, <span class="fl">0.10</span>),
            <span class="dt">AQI_p90=</span><span class="kw">quantile</span>(AQI, <span class="fl">0.90</span>),
            <span class="dt">AQI_min=</span><span class="kw">min</span>(AQI),
            <span class="dt">AQI_max=</span><span class="kw">max</span>(AQI)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>()</code></pre></div>
<p>5.6 繪製每個偵測站的AQI變化，以新店站為例。在下面的圖形裡，黑線表示每個月的AQI中位數變化，灰色的地帶則表示p90到p10的範圍，也就是有80%的天數在這個範圍內。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(ym_df, SiteName<span class="op">==</span><span class="st">&quot;新店&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">x=</span>YearMonth, <span class="dt">ymin=</span>AQI_min, <span class="dt">ymax=</span>AQI_max), <span class="dt">fill=</span><span class="st">&quot;grey&quot;</span>, <span class="dt">alpha=</span><span class="fl">0.5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>YearMonth, <span class="dt">y=</span>AQI_median)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks=</span><span class="st">&quot;1 month&quot;</span>, <span class="dt">date_labels=</span><span class="st">&quot;%Y-%m&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">250</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">250</span>, <span class="dv">25</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;監測年月&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">60</span>, <span class="dt">hjust=</span><span class="dv">1</span>),
        <span class="dt">panel.background =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>5.7 觀察上面的折線圖，你對新店站的每月AQI變化情形有什麼想法？比較兩個折線圖後，你有什麼想法？</p>
<p>5.8 一次繪製多個觀測站資料 <img src="bookdown-demo_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<hr />
<ol start="6" style="list-style-type: decimal">
<li>觀察上面的資料與圖形，形成問題的假設</li>
</ol>
</div>
<div id="-4" class="section level2 unnumbered">
<h2>小結</h2>
<ul>
<li><p>本節透過同學對於實際資料的練習，學習探索性資料分析。事實上，探索性資料分析的步驟與技術並沒有很嚴格的定義，透過對資料觀察的透徹理解與程式設計技巧的熟練，便能夠良好地掌握探索性資料分析。</p></li>
<li><p>學習程式的最佳方式不需記憶細節，而是不斷持續練習，如果不記得程式指令或函數的寫法並不是嚴重的事，網路上有相當多資源，例如github、stack overflow或是部落格等等，甚至包含現成的程式碼可以修改後利用。透過日積月累的方式，逐漸提升程式設計的技巧，並非難事。</p></li>
</ul>
</div>
<div id="-4" class="section level2 unnumbered">
<h2>延伸思考</h2>
<ul>
<li>在收到一分真正的資料後，你要如何運用探索性資料分析開始進行資料分析的第一步？</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-mining.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-exploratory_data_analysis.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
