<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 資料視覺化 | R語言課程講義</title>
  <meta name="description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 資料視覺化 | R語言課程講義" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 資料視覺化 | R語言課程講義" />
  
  <meta name="twitter:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  

<meta name="author" content="林頌堅" />


<meta name="date" content="2019-11-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyverse.html">
<link rel="next" href="exploratory-data-analysis.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R語言課程講義</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R語言的基本概念與語法</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e8aab2e7a88be7b0a1e4bb8b"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5adb8e7bf92e79baee6a899"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.1</b> R語言的基本概念</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.2</b> R語言的運算</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3</b> R語言的基本資料型態</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#section-1.3.1"><i class="fa fa-check"></i><b>1.3.1</b> 數值資料型態</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#section-1.3.2"><i class="fa fa-check"></i><b>1.3.2</b> 文字資料型態</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#section-1.3.3"><i class="fa fa-check"></i><b>1.3.3</b> 邏輯資料型態</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#factor"><i class="fa fa-check"></i><b>1.3.4</b> factor資料型態</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.4</b> R語言的特殊資料型態</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#vector"><i class="fa fa-check"></i><b>1.4.1</b> vector</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#matrix"><i class="fa fa-check"></i><b>1.4.2</b> matrix</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#list"><i class="fa fa-check"></i><b>1.4.3</b> list</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>1.4.4</b> data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5b08fe7b590"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5bbb6e4bcb8e6809de88083"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>2</b> 運用R語言進行資料處理</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> 預備工作</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 設定工作目錄</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> 讀入檔案資料</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.1"><i class="fa fa-check"></i><b>2.2.1</b> 讀入空氣品質指標資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.2"><i class="fa fa-check"></i><b>2.2.2</b> 瀏覽讀入的資料</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> 資料整理</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#aqina"><i class="fa fa-check"></i><b>2.3.1</b> 去除AQI為NA的資料紀錄</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#variable"><i class="fa fa-check"></i><b>2.3.2</b> Variable資料型態變更</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4"><i class="fa fa-check"></i><b>2.4</b> 資料分析</a><ul>
<li class="chapter" data-level="2.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.1"><i class="fa fa-check"></i><b>2.4.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.2"><i class="fa fa-check"></i><b>2.4.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.3"><i class="fa fa-check"></i><b>2.4.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.4"><i class="fa fa-check"></i><b>2.4.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> 程式存檔</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tidyverse簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1</b> tidy資料格式簡介</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.1</b> tidy資料格式的特徵</a></li>
<li class="chapter" data-level="3.1.2" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.2</b> tidy資料格式的優點</a></li>
<li class="chapter" data-level="3.1.3" data-path="tidyverse.html"><a href="tidyverse.html#wide-format-vs.long-format"><i class="fa fa-check"></i><b>3.1.3</b> wide format vs. long format</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.2</b> tidyverse套件</a></li>
<li class="chapter" data-level="3.3" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data-format"><i class="fa fa-check"></i><b>3.3</b> tidy data format的資料分析方法</a><ul>
<li class="chapter" data-level="3.3.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="3.3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.3.2</b> 使用tidyverse套件的函數</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4</b> 資料整理</a></li>
<li class="chapter" data-level="3.5" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5</b> 資料分析</a><ul>
<li class="chapter" data-level="3.5.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="3.5.2" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="3.5.3" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="3.5.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> 資料視覺化</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1"><i class="fa fa-check"></i><b>4.1</b> 資訊視覺化簡介</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1.1"><i class="fa fa-check"></i><b>4.1.1</b> 視覺化的應用</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1.2"><i class="fa fa-check"></i><b>4.1.2</b> 應用圖形呈現各種問題</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>4.2</b> R語言的資料視覺化工具</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.1</b> ggplot2的運作概念</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualization.html"><a href="data-visualization.html#aesthetics"><i class="fa fa-check"></i><b>4.2.2</b> Aesthetics上幾種常用的資料編碼方式</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-geometrics"><i class="fa fa-check"></i><b>4.2.3</b> ggplot2上幾種常用的圖表類型 (Geometrics)</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.4</b> 使用ggplot2套件</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3"><i class="fa fa-check"></i><b>4.3</b> 以資料視覺化的方式進行資料探索</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i><b>4.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3.2"><i class="fa fa-check"></i><b>4.3.2</b> 問題</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#section-4.4"><i class="fa fa-check"></i><b>4.4</b> 利用直方圖呈現資料的分布情形</a></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#section-4.5"><i class="fa fa-check"></i><b>4.5</b> 利用長條圖進行資料之間的比較</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#section-4.6"><i class="fa fa-check"></i><b>4.6</b> 利用散佈圖呈現兩個數值之間的關係</a></li>
<li class="chapter" data-level="4.7" data-path="data-visualization.html"><a href="data-visualization.html#section-4.7"><i class="fa fa-check"></i><b>4.7</b> 使用盒狀圖比較多個群體的分布情形</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization.html"><a href="data-visualization.html#section-4.8"><i class="fa fa-check"></i><b>4.8</b> 利用並列的多個圖表進行比較</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>5</b> 利用R語言進行探索性資料分析</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-8"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-9"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.1"><i class="fa fa-check"></i><b>5.1</b> 探索性資料分析是什麼？</a></li>
<li class="chapter" data-level="5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.2"><i class="fa fa-check"></i><b>5.2</b> 以環保署日空氣品質指標開放資料為例進行探索性資料分析</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-mining.html"><a href="data-mining.html"><i class="fa fa-check"></i><b>6</b> 資料探勘</a><ul>
<li class="chapter" data-level="" data-path="data-mining.html"><a href="data-mining.html#-10"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-mining.html"><a href="data-mining.html#-11"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="6.1" data-path="data-mining.html"><a href="data-mining.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 資料探勘的定義</a></li>
<li class="chapter" data-level="6.2" data-path="data-mining.html"><a href="data-mining.html#section-6.2"><i class="fa fa-check"></i><b>6.2</b> 資料探勘的步驟</a></li>
<li class="chapter" data-level="6.3" data-path="data-mining.html"><a href="data-mining.html#section-6.3"><i class="fa fa-check"></i><b>6.3</b> 資料探勘的分類</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html"><i class="fa fa-check"></i><b>7</b> 利用R語言進行非監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-12"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-13"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="7.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 集群分析</a></li>
<li class="chapter" data-level="7.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2"><i class="fa fa-check"></i><b>7.2</b> 以進出站人數統計資料對臺鐵主要車站進行集群分析</a><ul>
<li class="chapter" data-level="7.2.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.1"><i class="fa fa-check"></i><b>7.2.1</b> 載入相關套件</a></li>
<li class="chapter" data-level="7.2.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.2"><i class="fa fa-check"></i><b>7.2.2</b> 選取資料</a></li>
<li class="chapter" data-level="7.2.3" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.3"><i class="fa fa-check"></i><b>7.2.3</b> 資料的清除與整理等前處理</a></li>
<li class="chapter" data-level="7.2.4" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.4"><i class="fa fa-check"></i><b>7.2.4</b> 產生站點資料特徵</a></li>
<li class="chapter" data-level="7.2.5" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.5"><i class="fa fa-check"></i><b>7.2.5</b> 維度縮減</a></li>
<li class="chapter" data-level="7.2.6" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.6"><i class="fa fa-check"></i><b>7.2.6</b> 將站點依據彼此距離視覺化</a></li>
<li class="chapter" data-level="7.2.7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.7"><i class="fa fa-check"></i><b>7.2.7</b> 站點集群</a></li>
<li class="chapter" data-level="7.2.8" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.8"><i class="fa fa-check"></i><b>7.2.8</b> 結果的解釋</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html"><i class="fa fa-check"></i><b>8</b> 利用R語言進行監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-14"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-15"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="8.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1"><i class="fa fa-check"></i><b>8.1</b> 監督式機器學習</a><ul>
<li class="chapter" data-level="8.1.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1.1"><i class="fa fa-check"></i><b>8.1.1</b> 分類</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#tmdb"><i class="fa fa-check"></i><b>8.2</b> TMDB電影評分預測</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>8.2.1</b> 載入tidyverse套件</a></li>
<li class="chapter" data-level="8.2.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.2.2"><i class="fa fa-check"></i><b>8.2.2</b> 讀入資料</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> 資料處理與特徵抽取</a><ul>
<li class="chapter" data-level="8.3.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.1"><i class="fa fa-check"></i><b>8.3.1</b> 資料的清除與整理</a></li>
<li class="chapter" data-level="8.3.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.2"><i class="fa fa-check"></i><b>8.3.2</b> 轉換資料為有效描述和預測的特徵</a></li>
<li class="chapter" data-level="8.3.3" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>8.3.3</b> 建立一個data frame用來比較各種分類演算法</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#k-nearest-neightbors"><i class="fa fa-check"></i><b>8.4</b> 進行K-Nearest Neightbors分類</a></li>
<li class="chapter" data-level="8.5" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#naive-bayes"><i class="fa fa-check"></i><b>8.5</b> 進行Naive Bayes演算法分類</a></li>
<li class="chapter" data-level="8.6" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> 進行支持向量機分類</a></li>
<li class="chapter" data-level="8.7" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.7"><i class="fa fa-check"></i><b>8.7</b> 進行決策樹分類</a></li>
<li class="chapter" data-level="8.8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.8"><i class="fa fa-check"></i><b>8.8</b> 進行隨機森林分類</a></li>
<li class="chapter" data-level="8.9" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.9"><i class="fa fa-check"></i><b>8.9</b> 進行梯度提升機分類</a></li>
<li class="chapter" data-level="8.10" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.10"><i class="fa fa-check"></i><b>8.10</b> 比較各分類器的結果</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R語言課程講義</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_visualization" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> 資料視覺化</h1>
<div id="-6" class="section level2 unnumbered">
<h2>課程簡介</h2>
<div id="-7" class="section level3 unnumbered">
<h3>課程簡介</h3>
<p>本次課程的目的為介紹R語言上主要的資料視覺化工具– ggplot2。本次課程將以空氣品質指標資料為例，探討資料視覺化的過程。包括以下的內容：</p>
<ul>
<li>資訊視覺化簡介</li>
<li>R語言的資料視覺化工具: ggplot2</li>
<li>以資料視覺化的方式進行資料探索</li>
</ul>
</div>
<div id="-3" class="section level3 unnumbered">
<h3>學習目標</h3>
<ul>
<li>能夠說明在資訊視覺化中各種圖表類型適合的應用問題</li>
<li>能夠將輸入的資料檔案轉換成可以進行視覺化的形式</li>
<li>能夠利用ggplot2 套件進行資料視覺化</li>
</ul>
</div>
</div>
<div id="section-4.1" class="section level2">
<h2><span class="header-section-number">4.1</span> 資訊視覺化簡介</h2>
<p>資料視覺化是以適當的圖形表現出資料中蘊藏的資訊，以便透過視覺的方式了解資料的意義，進一步深入問題。</p>
<p>進行資料處理與分析可以分為5個步驟：</p>
<ol style="list-style-type: decimal">
<li>問題擬定</li>
<li>資料取得</li>
<li>資料清理</li>
<li>資料分析</li>
<li>結果解釋</li>
</ol>
<p>其中的第4和第5步驟都可以進行資料視覺化。在第4步驟中，可以利用資料視覺化進行資料的探索分析，概觀資料的樣貌，擬定相關資料模型。第5步驟則是在對外說明時，利用圖形增強研究結果說明的印象和效用。</p>
<div id="section-4.1.1" class="section level3">
<h3><span class="header-section-number">4.1.1</span> 視覺化的應用</h3>
<p><a href="https://extremepresentation.com/design/7-charts/">常見的視覺化應用問題</a>可以分成以下五類：</p>
<ul>
<li>分布(distribution)：某一數值資料的散佈情形
<ul>
<li>觀察重點： 最大值、最小值、集中化、異常</li>
</ul></li>
<li>比較(comparison)：比較某一類別資料在其對應數值上的差異
<ul>
<li>觀察重點： 大小、順序、分布範圍</li>
</ul></li>
<li>組成(compositon)：某一類別資料其對應數值的比例
<ul>
<li>觀察重點： 比例大小</li>
</ul></li>
<li>關係(relationship)：某兩個數值資料之間的關係
<ul>
<li>觀察重點： 模式(是否呈現直線)、分布範圍</li>
</ul></li>
<li>趨勢(trend)：某一數值資料對另一與時間有關的資料的關係
<ul>
<li>觀察重點： 成長或衰減、週期</li>
</ul></li>
</ul>
<p>這些問題可以組合，例如比較類別的分布</p>
</div>
<div id="section-4.1.2" class="section level3">
<h3><span class="header-section-number">4.1.2</span> 應用圖形呈現各種問題</h3>
<p>具體來說，各項問題可以利用不同的圖形來呈現，例如：</p>
<ul>
<li>分布：以直方圖表示某一數值資料的散佈情形</li>
<li>比較：以長條圖比較某一類別資料在其對應數值上的差異</li>
<li>組成：以圓餅圖表示某一類別資料其對應數值的比例</li>
<li>關係：以散佈圖觀察某兩個數值資料之間的關係</li>
<li>趨勢：折線圖觀察數值資料對時間資料的關係</li>
<li>比較+分布：以盒狀圖或小提琴圖比較某一類別資料其對應數值的散佈情形</li>
</ul>
<hr />
<p>綜合以上所說的，資料視覺化可以定義為：運用各種類型的圖表，以圖表上的位置、顏色、形狀、大小等視覺線索表現資料的分布、比較、組成、關係和趨勢，以便進行資料的分析，發掘資料蘊藏的訊息，同時也提供做為溝通說明時的輔助工具。</p>
</div>
</div>
<div id="r" class="section level2">
<h2><span class="header-section-number">4.2</span> R語言的資料視覺化工具</h2>
<p>ggplot2是R語言中常見的一個視覺化套件，提供一套標準圖表與資訊視覺化的語法和套件。</p>
<div id="ggplot2" class="section level3">
<h3><span class="header-section-number">4.2.1</span> ggplot2的運作概念</h3>
<ol style="list-style-type: decimal">
<li>找出資料中要分析的單元</li>
<li>將資料整理成data frame (或tibble)的格式，data frame上的每一個Observation，視為圖形上要呈現的單元</li>
<li>選擇data frame上需要對應到位置、顏色、形狀或大小等資料編碼方式的Variables</li>
<li>選擇圖表類型</li>
<li>設定各種資料編碼方式的表現樣式，例如座標的尺度、調色板等，</li>
<li>必要時調整圖形的座標類型、圖表層面和圖表外觀。</li>
</ol>
<p>以下將上面的各個步驟對應到 ggplot2中的幾種函數與語法</p>
<ul>
<li>Data 資料來源</li>
<li>Aesthetics 資料編碼：位置、顏色、形狀、大小</li>
<li>Geometrics 圖表類型</li>
<li>Scales 資料編碼的表現形式</li>
<li>Coordinates 座標類型</li>
<li>Facets 圖表層面</li>
<li>Themes 圖表外觀</li>
</ul>
</div>
<div id="aesthetics" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Aesthetics上幾種常用的資料編碼方式</h3>
<ul>
<li><code>x</code>：x軸位置</li>
<li><code>y</code>：y軸位置</li>
<li><code>color</code>：點、線的顏色</li>
<li><code>fill</code>：填入的顏色</li>
<li><code>size</code>：大小</li>
<li><code>linetype</code>：線的樣式</li>
<li><code>shape</code>：點的樣式</li>
<li><code>label</code>：文字標示</li>
</ul>
</div>
<div id="ggplot2-geometrics" class="section level3">
<h3><span class="header-section-number">4.2.3</span> ggplot2上幾種常用的圖表類型 (Geometrics)</h3>
<ul>
<li><code>geom_histogram()</code>：直方圖</li>
<li><code>geom_col()</code>：長條圖</li>
<li><code>geom_line()</code>：折線圖</li>
<li><code>geom_point()</code>, <code>geom_jitter()</code>, <code>geom_count()</code>：散佈圖、點狀圖</li>
<li><code>geom_boxplot()</code>：盒狀圖</li>
<li><code>geom_violin()</code>：小提琴圖</li>
<li><code>geom_area()</code>：區域圖</li>
<li><code>geom_tile()</code>：方塊圖</li>
<li><code>geom_text()</code>：文字</li>
</ul>
</div>
<div id="ggplot2" class="section level3">
<h3><span class="header-section-number">4.2.4</span> 使用ggplot2套件</h3>
<p>ggplot2是tidyverse中包含的一個套件 可以使用<code>library(tidyverse)</code>載入，或單獨使用<code>library(ggplot2)</code>載入。</p>
</div>
</div>
<div id="section-4.3" class="section level2">
<h2><span class="header-section-number">4.3</span> 以資料視覺化的方式進行資料探索</h2>
<p>以下利用空氣品質指標資料為例，說明以資料視覺化的方式進行資料探索的過程。</p>
<div id="-2" class="section level3">
<h3><span class="header-section-number">4.3.1</span> 預備工作</h3>
<ol style="list-style-type: decimal">
<li>以檔案總管在「我的文件」下的「rCourse」目錄內新增工作目錄「04」</li>
<li>開啟新的<strong>Script</strong></li>
<li>設定工作目錄</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setwd</span>(<span class="st">&quot;rCourse/04&quot;</span>)</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>載入tidyverse套件</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>讀取空氣品質指標資料的CSV檔案</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&quot;http://opendata.epa.gov.tw/webapi/Data/REWIQA/?$orderby=SiteName&amp;$skip=0&amp;$top=1000&amp;format=csv&quot;</span>, 
               <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8-BOM&quot;</span>,
               <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>) <span class="co"># 讀取空氣品質指標資料</span></code></pre></div>
<p><img src="image/vis_aqi_df.png" /> 6. 空氣品質指標的原始資料中只有偵測站所在線市資料，沒有地區名稱，因此將各縣市對應的地區資料county_area.csv下載到工作目錄「04」中</p>
<ol start="7" style="list-style-type: decimal">
<li>讀county_area.csv</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ca &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&quot;county_area.csv&quot;</span>,
               <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>, <span class="dt">stringsAsFactors=</span><span class="ot">FALSE</span>)</code></pre></div>
<div class="figure">
<img src="image/vis_ca.png" />

</div>
<p><strong>注意</strong>：county_area.csv與空氣品質指標資料的編碼方式不同，前者是UTF-8 without BOM，後者則是 UTF-8 with BOM</p>
<ol start="8" style="list-style-type: decimal">
<li>將地區資料加入空氣品質指標資料</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data &lt;-<span class="st"> </span>aqi_data <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#利用兩個資料表都有County，連結兩個資料表</span>
<span class="st">  </span><span class="kw">left_join</span>(ca)</code></pre></div>
<pre><code>## Joining, by = &quot;County&quot;</code></pre>
<ol start="9" style="list-style-type: decimal">
<li>去除AQI為NA的資料紀錄</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data &lt;-<span class="st"> </span>aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(AQI))</code></pre></div>
<ol start="10" style="list-style-type: decimal">
<li>將部分Character型態的資料欄位改成Factor</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data &lt;-<span class="st"> </span>aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">County=</span><span class="kw">factor</span>(County)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Status=</span><span class="kw">factor</span>(Status, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;設備維護&quot;</span>, <span class="st">&quot;良好&quot;</span>, <span class="st">&quot;普通&quot;</span>, <span class="st">&quot;對敏感族群不健康&quot;</span>,<span class="st">&quot;對所有族群不健康&quot;</span>, <span class="st">&quot;危害&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Area=</span><span class="kw">factor</span>(Area))</code></pre></div>
</div>
<div id="section-4.3.2" class="section level3">
<h3><span class="header-section-number">4.3.2</span> 問題</h3>
<p>以資料視覺化的方式回答以下的問題：</p>
<ul>
<li>全台各地空氣品質指標的分布情形為何？</li>
<li>各地區(北、中、南、東、離島)的觀測站數量為何？</li>
<li>PM2.5指標與AQI之間的關係為何？</li>
<li>比較各地區的空氣品質分布情形</li>
<li>同時比較各地區觀測站測得的AQI、PM10與PM2.5等各種資料的分布</li>
</ul>
</div>
</div>
<div id="section-4.4" class="section level2">
<h2><span class="header-section-number">4.4</span> 利用直方圖呈現資料的分布情形</h2>
<p>要以資料視覺化的方式分析「全台各地空氣品質指標的分布情形為何？」，首先，判斷出這個分析過程中的單位是各地區的偵測站，觀測值則是空氣品質指標(AQI)。</p>
<p>接著，了解各地空氣品質指標的統計摘要。此處，利用統計摘要<code>summary()</code>描述資料分布，查看最大值、最小值與資料的分布區間。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(AQI) <span class="op">%&gt;%</span><span class="st">         </span><span class="co"># 選擇AQI值欄位</span>
<span class="st">  </span><span class="kw">summary</span>()               <span class="co"># 對AQI值欄位資料統計摘要</span></code></pre></div>
<pre><code>##       AQI        
##  Min.   : 21.00  
##  1st Qu.: 29.25  
##  Median : 33.00  
##  Mean   : 46.63  
##  3rd Qu.: 53.50  
##  Max.   :113.00</code></pre>
<ol style="list-style-type: decimal">
<li>初步繪製的圖形</li>
</ol>
<p>資料分布一般可以採用直方圖(histogram)。ggplot2中，產生直方圖的圖表類型是<code>geom_histogram()</code>，並且將偵測站測得的AQI值對應到直方圖的x軸。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span><span class="st">         </span><span class="co">#以直方圖繪製AQI分布</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x=</span>AQI))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>ggplot2的直方圖geom_histogram()，將x軸上的資料分為若干區間(例如：0~5, 6~10, 11~15, …)，預設為30個區間。</p>
<ol start="2" style="list-style-type: decimal">
<li>設置區間範圍</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x_breaks &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="kw">max</span>(aqi_data<span class="op">$</span>AQI, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)<span class="op">+</span><span class="dv">10</span>, <span class="dv">10</span>) <span class="co"># 產生劃分資料的區間</span>
x_breaks</code></pre></div>
<pre><code>##  [1]   0  10  20  30  40  50  60  70  80  90 100 110 120</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x=</span>AQI), <span class="dt">breaks=</span>x_breaks) <span class="co"># 設定直方圖的區間</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>加入X軸座標</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">x=</span>AQI), <span class="dt">breaks=</span>x_breaks) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> x_breaks, <span class="dt">minor_breaks=</span><span class="ot">NULL</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<ol start="4" style="list-style-type: decimal">
<li>修改與加入標題</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(AQI), <span class="dt">breaks=</span>x_breaks) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> x_breaks, <span class="dt">minor_breaks=</span><span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;AQI值&quot;</span>, <span class="dt">y=</span><span class="st">&quot;觀測站數&quot;</span>,
       <span class="dt">title=</span><span class="st">&quot;觀測站測得的AQI分布圖&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><strong>練習</strong></p>
<ul>
<li><p>將直方圖的y軸座標(觀測站數)主要間隔設為1</p></li>
<li><p>所有的PM2.5資料分布情形</p></li>
</ul>
</div>
<div id="section-4.5" class="section level2">
<h2><span class="header-section-number">4.5</span> 利用長條圖進行資料之間的比較</h2>
<p>在分析「各地區的觀測站數量與比例為何？」時，分析的單元已經不再是個觀測站，而是各地區。因此，首先將資料整理成以地區為主的data frame。新的data frame上每一個Observation對應到一個地區，觀測的Variable便是它的觀測站數量。所以，先將aqi_data上的Observations，依據地區分類，統計各地區上的觀測站數量，形成新的data frame。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">area_data &lt;-<span class="st"> </span>aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Area) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">count=</span><span class="kw">n</span>())</code></pre></div>
<div class="figure">
<img src="image/vis_area_sites.png" />

</div>
<ol style="list-style-type: decimal">
<li>初步繪製的圖形</li>
</ol>
<p>一般可利用長條圖進行資料的比較，每一個長條代表要比較的單位，長條的長度則是單位上比較的觀測值。ggplot2的長條圖為<code>geom_col()</code>。我們以area_data做為資料來源，比較每一個地區的觀測站數量，將地區(Area)放置在圖形的x軸上，各地區的觀測站數量放置在圖形的y軸上</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(area_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Area, <span class="dt">y=</span>count))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>加上排序的長條圖 上面的長條圖是依照地區的文字編碼進行排序，不容易一眼看出各地區偵測站數量的次序。因此，最好能將長條圖進行排序，使地區按照它們的偵測站數量由大到小排序。</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(area_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Area, <span class="kw">desc</span>(count)), <span class="dt">y=</span>count))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># reorder(x, y)： 依據y的大小，重新編排x的順序</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>修改y軸上的標示</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(area_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Area, <span class="kw">desc</span>(count)), <span class="dt">y=</span>count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="kw">max</span>(area_data<span class="op">$</span>count)<span class="op">+</span><span class="dv">5</span>, <span class="dv">5</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<ol start="4" style="list-style-type: decimal">
<li>加上標題</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(area_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Area, <span class="kw">desc</span>(count)), <span class="dt">y=</span>count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="kw">max</span>(area_data<span class="op">$</span>count)<span class="op">+</span><span class="dv">5</span>, <span class="dv">5</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;地區&quot;</span>, <span class="dt">y=</span><span class="st">&quot;觀測站數量&quot;</span>, <span class="dt">title=</span><span class="st">&quot;臺灣各地區的觀測站數量比較&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><strong>練習</strong></p>
<ul>
<li>各地區觀測站數量占全台灣整體的比例</li>
</ul>
</div>
<div id="section-4.6" class="section level2">
<h2><span class="header-section-number">4.6</span> 利用散佈圖呈現兩個數值之間的關係</h2>
<p>分析「PM2.5指標與AQI之間的關係為何？」可以將每一個觀測站做為一個分析單位，也就是在圖形上為一個點，利用散佈圖(scatter plot)呈現這兩個數值之間的關係。</p>
<ol style="list-style-type: decimal">
<li>初步繪製的圖形</li>
</ol>
<p>ggplot2中可以利用<code>geom_point()</code>畫出散佈圖。以aqi_data為資料來源，PM2.5指標為點的x軸座標，AQI為點的y軸座標。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>PM2.5_AVG, <span class="dt">y=</span>AQI))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>以色彩區別不同地區的結果</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>PM2.5_AVG, <span class="dt">y=</span>AQI, <span class="dt">color=</span>Area))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>修改標題</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>PM2.5_AVG, <span class="dt">y=</span>AQI, <span class="dt">color=</span>Area)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;PM2.5與AQI之間的關係&quot;</span>, <span class="dt">color=</span><span class="st">&quot;地區&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="section-4.7" class="section level2">
<h2><span class="header-section-number">4.7</span> 使用盒狀圖比較多個群體的分布情形</h2>
<p>前面在分析所有觀測站的空氣品質分布情形是使用<strong>直方圖</strong>，但如果要探討「各地區觀測站測得的空氣品質分布情形為何？」的問題，需要同時呈現多個分布，並進行比較。此時，便可以利用<strong>盒狀圖</strong>。每一個盒子代表一個地區，盒子中的橫線表示這地區AQI的中位數，上下緣分別代表第三和第一四分位數。盒子的高是四分位距，代表資料的分散程度，盒子愈高表示資料愈分散。盒子上下的直線外的點表示極端值或離群值。</p>
<ol style="list-style-type: decimal">
<li>初步繪製的圖形</li>
</ol>
<p>要使用盒狀圖畫出各地區觀測站測得的空氣品質分布，可以利用函數<code>geom_boxplot()</code>，以aqi_data為資料來源，觀測站做為分析的單位，將觀測站所屬的地區做為x軸，AQI值則為y軸。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Area, <span class="dt">y=</span>AQI)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;地區&quot;</span>, <span class="dt">y=</span><span class="st">&quot;AQI&quot;</span>, <span class="dt">title=</span><span class="st">&quot;臺灣各地區空氣品質分布情形&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>以不同的顏色呈現各地區的AQI分布</li>
</ol>
<p>為了讓圖形較為美觀，以不同顏色呈現各地區的空氣品質指標分布。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Area, <span class="dt">y=</span>AQI, <span class="dt">color=</span>Area)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;地區&quot;</span>, <span class="dt">y=</span><span class="st">&quot;AQI&quot;</span>, <span class="dt">title=</span><span class="st">&quot;臺灣各地區空氣品質分布情形&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>取消圖例(legend)</li>
</ol>
<p>因為x軸已經標示出地區，圖形上的圖例(legend)顯得多餘，所以將其取消。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(aqi_data) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Area, <span class="dt">y=</span>AQI, <span class="dt">color=</span>Area)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;地區&quot;</span>, <span class="dt">y=</span><span class="st">&quot;AQI&quot;</span>, <span class="dt">title=</span><span class="st">&quot;臺灣各地區空氣品質分布情形&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="section-4.8" class="section level2">
<h2><span class="header-section-number">4.8</span> 利用並列的多個圖表進行比較</h2>
<p>上面的[使用盒狀圖比較多個群體的分布情形觀測站]只比較各地區的AQI值，如果還要比較「各地區觀測站測得的PM10與PM2.5分布」，此時可以利用並列的多個圖表相同類型來呈現。</p>
<ol style="list-style-type: decimal">
<li>取出各地區觀測站測得的AQI、PM10與PM2.5，並從wide format改為long format</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">area_data &lt;-<span class="st"> </span>aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(Area, SiteName, AQI, PM10_AVG, PM2.5_AVG) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># 取出地區、觀測站、AQI、PM10與PM2.5等資料</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>index, <span class="dt">value=</span>value, AQI, PM10_AVG, PM2.5_AVG) <span class="co"># 從wide format改為long format</span></code></pre></div>
<div class="figure">
<img src="image/vis_area_data.png" />

</div>
<ol start="2" style="list-style-type: decimal">
<li>利用圖表層面將各地區觀測站測得的AQI、PM10與PM2.5分布畫在並列的圖表上</li>
</ol>
<p>盒狀圖類似上面的做法，但利用facet_wrap(~index)，將三種指標的盒狀圖並列</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(Area, SiteName, AQI, PM10_AVG, PM2.5_AVG) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>index, <span class="dt">value=</span>value, AQI, PM10_AVG, PM2.5_AVG) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Area, <span class="dt">y=</span>value, <span class="dt">color=</span>Area)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>index)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li>取消圖例</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">aqi_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(Area, SiteName, AQI, PM10_AVG, PM2.5_AVG) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>index, <span class="dt">value=</span>value, AQI, PM10_AVG, PM2.5_AVG) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Area, <span class="dt">y=</span>value, <span class="dt">color=</span>Area)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>index) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p><strong>練習</strong></p>
<ul>
<li>將X軸與Y軸的標題改為中文，並加上圖表標題</li>
</ul>
</div>
<div id="-3" class="section level2 unnumbered">
<h2>小結</h2>
<ul>
<li>進行資料視覺化時，可以依據問題的類型思考運用什麼樣的圖表。適合進行資料視覺化的問題類型，包括分布、比較(或者進一步來說，排序)、趨勢、關係與組成。簡要來說，各種問題可以適用的圖表如下：</li>
</ul>
<ol style="list-style-type: decimal">
<li>資料數值的分布情形： 直方圖
<ul>
<li>x軸：數值資料</li>
</ul></li>
<li>同種資料數值之間的比較： 長條圖
<ul>
<li>x軸：類型資料</li>
<li>y軸：數值資料</li>
</ul></li>
<li>資料數值隨時間變化的關係： 折線圖
<ul>
<li>x軸：時間資料</li>
<li>y軸：數值資料</li>
</ul></li>
<li>兩種資料數值之間的關係： 散佈圖
<ul>
<li>x軸：數值資料</li>
<li>y軸：數值資料</li>
<li>若有第三種以上資料
<ul>
<li>類型資料： 點的顏色</li>
<li>數值資料： 點的大小</li>
</ul></li>
</ul></li>
<li>資料分布的比較：盒狀圖、小提琴圖
<ul>
<li>x軸：類型資料</li>
<li>y軸：數值資料</li>
</ul></li>
</ol>
<ul>
<li>ggplot2畫圖步驟</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>data frame –&gt; ggplot()的第一項</p></li>
<li><p>aes(x, y, color, fill, size)</p></li>
<li><p>geom_ –&gt; 圖表樣式</p></li>
<li><p>scal_ –&gt; 資料樣式</p></li>
<li><p>labs –&gt; 標題</p></li>
<li><p>theme –&gt; 圖表外觀</p></li>
</ol>
</div>
<div id="-3" class="section level2 unnumbered">
<h2>延伸思考</h2>
<ul>
<li><p>在Excel 上畫圖時使用的方式為wide format，但在其他繪圖工具時則是 使用long format，從你自己的觀察，就一般人的思考角度來說，兩者在使用上各有何優缺點？</p></li>
<li><p>就你自己的體會，當進行資訊視覺化的問題時，怎麼樣的進行步驟比較合適？</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidyverse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-data_visualization.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
