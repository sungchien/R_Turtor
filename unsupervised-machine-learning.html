<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 利用R語言進行非監督式機器學習 | R語言課程講義</title>
  <meta name="description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 利用R語言進行非監督式機器學習 | R語言課程講義" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 利用R語言進行非監督式機器學習 | R語言課程講義" />
  
  <meta name="twitter:description" content="本課程介紹R語言的基本語法以及一些簡單的應用。" />
  

<meta name="author" content="林頌堅" />


<meta name="date" content="2019-11-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-mining.html">
<link rel="next" href="supervised-machine-learning.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R語言課程講義</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R語言的基本概念與語法</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e8aab2e7a88be7b0a1e4bb8b"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5adb8e7bf92e79baee6a899"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.1</b> R語言的基本概念</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.2</b> R語言的運算</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3</b> R語言的基本資料型態</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#section-1.3.1"><i class="fa fa-check"></i><b>1.3.1</b> 數值資料型態</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#section-1.3.2"><i class="fa fa-check"></i><b>1.3.2</b> 文字資料型態</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#section-1.3.3"><i class="fa fa-check"></i><b>1.3.3</b> 邏輯資料型態</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#factor"><i class="fa fa-check"></i><b>1.3.4</b> factor資料型態</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.4</b> R語言的特殊資料型態</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#vector"><i class="fa fa-check"></i><b>1.4.1</b> vector</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#matrix"><i class="fa fa-check"></i><b>1.4.2</b> matrix</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#list"><i class="fa fa-check"></i><b>1.4.3</b> list</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>1.4.4</b> data frame</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5b08fe7b590"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#e5bbb6e4bcb8e6809de88083"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>2</b> 運用R語言進行資料處理</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> 預備工作</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 設定工作目錄</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> 讀入檔案資料</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.1"><i class="fa fa-check"></i><b>2.2.1</b> 讀入空氣品質指標資料</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.2.2"><i class="fa fa-check"></i><b>2.2.2</b> 瀏覽讀入的資料</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> 資料整理</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#aqina"><i class="fa fa-check"></i><b>2.3.1</b> 去除AQI為NA的資料紀錄</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#variable"><i class="fa fa-check"></i><b>2.3.2</b> Variable資料型態變更</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4"><i class="fa fa-check"></i><b>2.4</b> 資料分析</a><ul>
<li class="chapter" data-level="2.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.1"><i class="fa fa-check"></i><b>2.4.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.2"><i class="fa fa-check"></i><b>2.4.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.3"><i class="fa fa-check"></i><b>2.4.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.4.4"><i class="fa fa-check"></i><b>2.4.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-manipulation.html"><a href="data-manipulation.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> 程式存檔</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tidyverse簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1</b> tidy資料格式簡介</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.1</b> tidy資料格式的特徵</a></li>
<li class="chapter" data-level="3.1.2" data-path="tidyverse.html"><a href="tidyverse.html#tidy"><i class="fa fa-check"></i><b>3.1.2</b> tidy資料格式的優點</a></li>
<li class="chapter" data-level="3.1.3" data-path="tidyverse.html"><a href="tidyverse.html#wide-format-vs.long-format"><i class="fa fa-check"></i><b>3.1.3</b> wide format vs. long format</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.2</b> tidyverse套件</a></li>
<li class="chapter" data-level="3.3" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data-format"><i class="fa fa-check"></i><b>3.3</b> tidy data format的資料分析方法</a><ul>
<li class="chapter" data-level="3.3.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="3.3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>3.3.2</b> 使用tidyverse套件的函數</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.4</b> 資料整理</a></li>
<li class="chapter" data-level="3.5" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5</b> 資料分析</a><ul>
<li class="chapter" data-level="3.5.1" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.1</b> 找出某一縣市的偵測站</a></li>
<li class="chapter" data-level="3.5.2" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.2</b> 找出空氣品質最糟糕的偵測站</a></li>
<li class="chapter" data-level="3.5.3" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.3</b> 找出汙染物是細懸浮微粒的偵測站數量</a></li>
<li class="chapter" data-level="3.5.4" data-path="intro.html"><a href="intro.html#-1"><i class="fa fa-check"></i><b>3.5.4</b> 計算各種空氣品質狀態的偵測站數量</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> 資料視覺化</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1"><i class="fa fa-check"></i><b>4.1</b> 資訊視覺化簡介</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1.1"><i class="fa fa-check"></i><b>4.1.1</b> 視覺化的應用</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.1.2"><i class="fa fa-check"></i><b>4.1.2</b> 應用圖形呈現各種問題</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>4.2</b> R語言的資料視覺化工具</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.1</b> ggplot2的運作概念</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-visualization.html"><a href="data-visualization.html#aesthetics"><i class="fa fa-check"></i><b>4.2.2</b> Aesthetics上幾種常用的資料編碼方式</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2-geometrics"><i class="fa fa-check"></i><b>4.2.3</b> ggplot2上幾種常用的圖表類型 (Geometrics)</a></li>
<li class="chapter" data-level="4.2.4" data-path="data-visualization.html"><a href="data-visualization.html#ggplot2"><i class="fa fa-check"></i><b>4.2.4</b> 使用ggplot2套件</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3"><i class="fa fa-check"></i><b>4.3</b> 以資料視覺化的方式進行資料探索</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#-2"><i class="fa fa-check"></i><b>4.3.1</b> 預備工作</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-visualization.html"><a href="data-visualization.html#section-4.3.2"><i class="fa fa-check"></i><b>4.3.2</b> 問題</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#section-4.4"><i class="fa fa-check"></i><b>4.4</b> 利用直方圖呈現資料的分布情形</a></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#section-4.5"><i class="fa fa-check"></i><b>4.5</b> 利用長條圖進行資料之間的比較</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#section-4.6"><i class="fa fa-check"></i><b>4.6</b> 利用散佈圖呈現兩個數值之間的關係</a></li>
<li class="chapter" data-level="4.7" data-path="data-visualization.html"><a href="data-visualization.html#section-4.7"><i class="fa fa-check"></i><b>4.7</b> 使用盒狀圖比較多個群體的分布情形</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization.html"><a href="data-visualization.html#section-4.8"><i class="fa fa-check"></i><b>4.8</b> 利用並列的多個圖表進行比較</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-manipulation.html"><a href="data-manipulation.html#-3"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>5</b> 利用R語言進行探索性資料分析</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-8"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#-9"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.1"><i class="fa fa-check"></i><b>5.1</b> 探索性資料分析是什麼？</a></li>
<li class="chapter" data-level="5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#section-5.2"><i class="fa fa-check"></i><b>5.2</b> 以環保署日空氣品質指標開放資料為例進行探索性資料分析</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-4"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-mining.html"><a href="data-mining.html"><i class="fa fa-check"></i><b>6</b> 資料探勘</a><ul>
<li class="chapter" data-level="" data-path="data-mining.html"><a href="data-mining.html#-10"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="data-mining.html"><a href="data-mining.html#-11"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="6.1" data-path="data-mining.html"><a href="data-mining.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 資料探勘的定義</a></li>
<li class="chapter" data-level="6.2" data-path="data-mining.html"><a href="data-mining.html#section-6.2"><i class="fa fa-check"></i><b>6.2</b> 資料探勘的步驟</a></li>
<li class="chapter" data-level="6.3" data-path="data-mining.html"><a href="data-mining.html#section-6.3"><i class="fa fa-check"></i><b>6.3</b> 資料探勘的分類</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html"><i class="fa fa-check"></i><b>7</b> 利用R語言進行非監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-12"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#-13"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="7.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 集群分析</a></li>
<li class="chapter" data-level="7.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2"><i class="fa fa-check"></i><b>7.2</b> 以進出站人數統計資料對臺鐵主要車站進行集群分析</a><ul>
<li class="chapter" data-level="7.2.1" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.1"><i class="fa fa-check"></i><b>7.2.1</b> 載入相關套件</a></li>
<li class="chapter" data-level="7.2.2" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.2"><i class="fa fa-check"></i><b>7.2.2</b> 選取資料</a></li>
<li class="chapter" data-level="7.2.3" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.3"><i class="fa fa-check"></i><b>7.2.3</b> 資料的清除與整理等前處理</a></li>
<li class="chapter" data-level="7.2.4" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.4"><i class="fa fa-check"></i><b>7.2.4</b> 產生站點資料特徵</a></li>
<li class="chapter" data-level="7.2.5" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.5"><i class="fa fa-check"></i><b>7.2.5</b> 維度縮減</a></li>
<li class="chapter" data-level="7.2.6" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.6"><i class="fa fa-check"></i><b>7.2.6</b> 將站點依據彼此距離視覺化</a></li>
<li class="chapter" data-level="7.2.7" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.7"><i class="fa fa-check"></i><b>7.2.7</b> 站點集群</a></li>
<li class="chapter" data-level="7.2.8" data-path="unsupervised-machine-learning.html"><a href="unsupervised-machine-learning.html#section-7.2.8"><i class="fa fa-check"></i><b>7.2.8</b> 結果的解釋</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="tidyverse.html"><a href="tidyverse.html#-5"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html"><i class="fa fa-check"></i><b>8</b> 利用R語言進行監督式機器學習</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-14"><i class="fa fa-check"></i>課程簡介</a><ul>
<li class="chapter" data-level="" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#-15"><i class="fa fa-check"></i>課程簡介</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-7"><i class="fa fa-check"></i>學習目標</a></li>
</ul></li>
<li class="chapter" data-level="8.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1"><i class="fa fa-check"></i><b>8.1</b> 監督式機器學習</a><ul>
<li class="chapter" data-level="8.1.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.1.1"><i class="fa fa-check"></i><b>8.1.1</b> 分類</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#tmdb"><i class="fa fa-check"></i><b>8.2</b> TMDB電影評分預測</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse"><i class="fa fa-check"></i><b>8.2.1</b> 載入tidyverse套件</a></li>
<li class="chapter" data-level="8.2.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.2.2"><i class="fa fa-check"></i><b>8.2.2</b> 讀入資料</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> 資料處理與特徵抽取</a><ul>
<li class="chapter" data-level="8.3.1" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.1"><i class="fa fa-check"></i><b>8.3.1</b> 資料的清除與整理</a></li>
<li class="chapter" data-level="8.3.2" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.3.2"><i class="fa fa-check"></i><b>8.3.2</b> 轉換資料為有效描述和預測的特徵</a></li>
<li class="chapter" data-level="8.3.3" data-path="intro.html"><a href="intro.html#data-frame"><i class="fa fa-check"></i><b>8.3.3</b> 建立一個data frame用來比較各種分類演算法</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#k-nearest-neightbors"><i class="fa fa-check"></i><b>8.4</b> 進行K-Nearest Neightbors分類</a></li>
<li class="chapter" data-level="8.5" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#naive-bayes"><i class="fa fa-check"></i><b>8.5</b> 進行Naive Bayes演算法分類</a></li>
<li class="chapter" data-level="8.6" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> 進行支持向量機分類</a></li>
<li class="chapter" data-level="8.7" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.7"><i class="fa fa-check"></i><b>8.7</b> 進行決策樹分類</a></li>
<li class="chapter" data-level="8.8" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.8"><i class="fa fa-check"></i><b>8.8</b> 進行隨機森林分類</a></li>
<li class="chapter" data-level="8.9" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.9"><i class="fa fa-check"></i><b>8.9</b> 進行梯度提升機分類</a></li>
<li class="chapter" data-level="8.10" data-path="supervised-machine-learning.html"><a href="supervised-machine-learning.html#section-8.10"><i class="fa fa-check"></i><b>8.10</b> 比較各分類器的結果</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>小結</a></li>
<li class="chapter" data-level="" data-path="data-visualization.html"><a href="data-visualization.html#-6"><i class="fa fa-check"></i>延伸思考</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R語言課程講義</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="unsupervised_machine_learning" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> 利用R語言進行非監督式機器學習</h1>
<div id="-12" class="section level2 unnumbered">
<h2>課程簡介</h2>
<div id="-13" class="section level3 unnumbered">
<h3>課程簡介</h3>
<p><strong>集群</strong>是根據資料之間的相似性(或者距離)，找出一種將資料劃分成若干群的方式。本次課程的目的為介紹非監督式機器學習中的集群分析，並且利用臺鐵提供的各站點進出站人數統計資料，從統計資訊抽取特徵，做為主要車站的特徵，進行集群分析的練習。本次課程包含以下的內容：</p>
<ul>
<li>集群分析簡介</li>
<li>集群分析AP (Affinity Propagation)演算法的應用</li>
</ul>
</div>
<div id="-6" class="section level3 unnumbered">
<h3>學習目標</h3>
<ul>
<li>能夠說明集群分析的概念，並選擇適用的問題</li>
<li>能夠應用AP演算法的套件apcluster進行集群分析</li>
</ul>
</div>
</div>
<div id="section-7.1" class="section level2">
<h2><span class="header-section-number">7.1</span> 集群分析</h2>
<p>如[資料探勘在傳播學的應用案例]所言，集群分析一種非監督式機器學習的資料探勘方法。其概念是根據資料的特性，設法找到一個可以良好地突顯資料的特徵間彼此相似性與相異性的方式。換言之，集群分析的結果是根據輸入資料特徵之間彼此的相似性，自動找到一種劃分方法使得特徵相似性較高的資料會被劃分在同一群組內，不在同一群組內的資料特徵之間相似性則比較低。</p>
<div class="figure">
<img src="image/clustering.png" />

</div>
<p>集群分析的演算法非常多，如</p>
<ol style="list-style-type: decimal">
<li>K-means</li>
<li>EM (expectation-maximization)</li>
<li>AHC (agglomerative hierarchical clustering, 聚合式階層集群)</li>
<li>DBSCAN</li>
<li>AP (affinity propagation)</li>
</ol>
<p>本章將利用AP演算法，對台鐵各站點，依照進出站人數統計資料的相似性，進行集群分析。</p>
<p>AP演算法可參考 Bodenhofer, U., Kothmeier, A., &amp; Hochreiter, S. (2011). APCluster: an R package for affinity propagation clustering. Bioinformatics, 27(17), 2463-2464.</p>
</div>
<div id="section-7.2" class="section level2">
<h2><span class="header-section-number">7.2</span> 以進出站人數統計資料對臺鐵主要車站進行集群分析</h2>
<p>在政府開放資料平台上，臺鐵提供了每日各站點進出人數。</p>
<p>我們推測不同車站的定位事實上可能可以從它的進出人數上反應出來。例如某一個車站它的平常上班日比起週末假日有較多的進出人數，這個車站可能是提供給附近上班族通勤之用。如果在週末假日有較多的進出人數，而且週五、週六的出站人數比進站人數多，這個車站的旅客可能主要為返鄉遊子或旅行的遊客。在本章中，我們將利用臺鐵主要車站週一到週日每天進出人數的比例做為各車站的特徵，進行集群分析，將具有相似特徵的車站，聚集起來，分析與討論各車站的定位。</p>
<p>在本章的應用中，我們可以根據KDD過程中的各個步驟進行集群分析，個步驟為：</p>
<ol style="list-style-type: decimal">
<li>選取資料 (Selection)</li>
<li>資料的清除與整理等前處理 (Preprocessing)</li>
<li>轉換資料為有效描述和預測的特徵 (Transformation)</li>
<li>運用機器學習(machine learning)的技術建立資料模型 (狹義的資料探勘) (Data Mining)</li>
<li>解釋、評估與應用 (Intepretation/Evaluation)</li>
</ol>
<div class="figure">
<img src="image/Fayyad96kdd-process.png" />

</div>
<div id="section-7.2.1" class="section level3">
<h3><span class="header-section-number">7.2.1</span> 載入相關套件</h3>
<p>首先載入輸入與處理資料的相關套件，因為臺鐵的資料多為JSON型式，所以載入JSON處理相關套件<code>jsonlite</code>。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)
<span class="kw">library</span>(jsonlite)</code></pre></div>
</div>
<div id="section-7.2.2" class="section level3">
<h3><span class="header-section-number">7.2.2</span> 選取資料</h3>
<p>讀取臺鐵的<a href="https://data.gov.tw/dataset/8792">每日各站點進出人數</a>資料。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(<span class="st">&quot;https://ods.railway.gov.tw/tra-ods-web/ods/download/dataResource/8ae4cabf6973990e0169947ed32454b9&quot;</span>)</code></pre></div>
<div class="figure">
<img src="image/station_io.png" />

</div>
<p>查看資料型態</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df)</code></pre></div>
<pre><code>##   trnOpDate           staCode          gateInComingCnt   
##  Length:45630       Length:45630       Length:45630      
##  Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character  
##  gateOutGoingCnt   
##  Length:45630      
##  Class :character  
##  Mode  :character</code></pre>
<ul>
<li>trnOpDate： 營運日期</li>
<li>staCode： 車站代碼</li>
<li>gateInComingCnt： 進站人數</li>
<li>gateOutGoingCnt： 出站人數</li>
</ul>
<p>將trnOpDate改變為日期資料型態，gateInComingCnt和gateOutGoingCnt則分別改為numeric資料型態。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">trnOpDate=</span><span class="kw">ymd</span>(trnOpDate)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gateInComingCnt=</span><span class="kw">as.numeric</span>(gateInComingCnt)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gateOutGoingCnt=</span><span class="kw">as.numeric</span>(gateOutGoingCnt))</code></pre></div>
<pre><code>## Warning: The `printer` argument is deprecated as of rlang 0.3.0.
## This warning is displayed once per session.</code></pre>
<p>再查看一次資料型態</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df)</code></pre></div>
<pre><code>##    trnOpDate            staCode          gateInComingCnt gateOutGoingCnt
##  Min.   :2019-04-23   Length:45630       Min.   :    0   Min.   :    0  
##  1st Qu.:2019-06-09   Class :character   1st Qu.:  146   1st Qu.:  155  
##  Median :2019-07-27   Mode  :character   Median :  660   Median :  663  
##  Mean   :2019-07-27                      Mean   : 2729   Mean   : 2729  
##  3rd Qu.:2019-09-14                      3rd Qu.: 2161   3rd Qu.: 2139  
##  Max.   :2019-10-31                      Max.   :87020   Max.   :84345</code></pre>
<hr />
<p>因為出入站資料僅有包含車站代碼，所以從另外一個開放資料<a href="https://data.gov.tw/dataset/33425">車站基本資料集</a>，讀取站點編號對應的名稱資料。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">site.df &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(<span class="st">&quot;http://ods.railway.gov.tw/tra-ods-web/ods/download/dataResource/0518b833e8964d53bfea3f7691aea0ee&quot;</span>)</code></pre></div>
<div class="figure">
<img src="image/station.png" />

</div>
<p>將進出站點資料加入站點名稱。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">left_join</span>(<span class="kw">select</span>(site.df, <span class="dt">staCode=</span>stationCode, <span class="dt">staName=</span>stationName))</code></pre></div>
<div class="figure">
<img src="image/station_name.png" />

</div>
<p>是否有站點資料缺少站點名稱？</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="kw">is.na</span>(df<span class="op">$</span>staName),]</code></pre></div>
<p>刪除沒有站點名稱的資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(staName))</code></pre></div>
</div>
<div id="section-7.2.3" class="section level3">
<h3><span class="header-section-number">7.2.3</span> 資料的清除與整理等前處理</h3>
<p>首先查看資料的樣貌，並且修改可能的錯誤。</p>
<p>以臺北站為例，畫出每天的進出站人數情形</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName<span class="op">==</span><span class="st">&quot;臺北&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>IO, <span class="dt">value=</span>Count, <span class="op">-</span>staName, <span class="op">-</span>staCode, <span class="op">-</span>trnOpDate) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>trnOpDate, <span class="dt">y=</span>Count, <span class="dt">color=</span>IO)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">90000</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">90000</span>, <span class="dv">10000</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;日期&quot;</span>, <span class="dt">y=</span><span class="st">&quot;進出站人數&quot;</span>, <span class="dt">color=</span><span class="st">&quot;進出&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey20&quot;</span>),
        <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey90&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p><strong>討論</strong></p>
<ol style="list-style-type: decimal">
<li>資料分布的範圍？</li>
<li>資料分布的樣式？</li>
<li>是否有異常值(outliers)？</li>
</ol>
</div>
<div id="section-7.2.4" class="section level3">
<h3><span class="header-section-number">7.2.4</span> 產生站點資料特徵</h3>
<p>站點資料特徵便是用來一組描述站點特性的資料。</p>
<p>首先計算每個站點每天平均進出站人數，以便接下來找出主要的車站</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(staName) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">In=</span><span class="kw">mean</span>(gateInComingCnt, <span class="dt">trim=</span><span class="fl">0.05</span>), <span class="dt">Out=</span><span class="kw">mean</span>(gateOutGoingCnt, <span class="dt">trim=</span><span class="fl">0.05</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(In))</code></pre></div>
<pre><code>## # A tibble: 237 x 3
##    staName     In    Out
##    &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;
##  1 臺北    63837. 63379.
##  2 桃園    27945. 28856.
##  3 中壢    26737. 26921.
##  4 臺南    26148. 26475.
##  5 臺中    25759. 24942.
##  6 板橋    21334. 21467.
##  7 新竹    20182. 20387.
##  8 高雄    16869. 16903.
##  9 松山    16836. 16665.
## 10 花蓮    16511. 15660.
## # ... with 227 more rows</code></pre>
<p>選取主要車站(每天平均進入人數達5000人以上)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cand_sta &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(staName) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">In=</span><span class="kw">mean</span>(gateInComingCnt, <span class="dt">trim=</span><span class="fl">0.05</span>), <span class="dt">Out=</span><span class="kw">mean</span>(gateOutGoingCnt, <span class="dt">trim=</span><span class="fl">0.05</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(In<span class="op">&gt;=</span><span class="dv">5000</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">pull</span>(staName)</code></pre></div>
<p>從原始資料中取出主要車站的資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName <span class="op">%in%</span><span class="st"> </span>cand_sta)</code></pre></div>
<p>根據前面的折線圖，我們可以觀察到進出站人數具有週期性變化的情形，而其週期大約是一週(一星期)。所以可能可以以一週為單位，彙整每一天進出站人數資料(取平均)，同時也注意避免雜訊(某一天突然增加或減少的異常值)。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span>df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">trnOpDateW=</span><span class="kw">wday</span>(trnOpDate, <span class="dt">label=</span><span class="ot">TRUE</span>, <span class="dt">locale=</span><span class="st">&quot;English&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(staName, trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">In=</span><span class="kw">mean</span>(gateInComingCnt, <span class="dt">trim=</span><span class="fl">0.05</span>), <span class="dt">Out=</span><span class="kw">mean</span>(gateOutGoingCnt, <span class="dt">trim=</span><span class="fl">0.05</span>)) <span class="co"># 捨棄前後0.05最大與最小的資料</span></code></pre></div>
<p>檢視汐科站在一週每天的進出人數分布範圍。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName<span class="op">==</span><span class="st">&quot;汐科&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;Var&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Count&quot;</span>, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>trnOpDateW, <span class="dt">y=</span>Count, <span class="dt">fill=</span>Var)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">15000</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">15000</span>, <span class="dv">3000</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Var, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">labeller =</span> <span class="kw">labeller</span>(<span class="dt">Var =</span> 
    <span class="kw">c</span>(<span class="st">&quot;In&quot;</span> =<span class="st"> &quot;進站&quot;</span>, <span class="st">&quot;Out&quot;</span> =<span class="st"> &quot;出站&quot;</span>))) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;平均進出站人數&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>以利用相同方式檢視臺東站和臺北站在一週每天的進出人數分布範圍。(臺北站由同學練習)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName<span class="op">==</span><span class="st">&quot;臺東&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;Var&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Count&quot;</span>, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>trnOpDateW, <span class="dt">y=</span>Count, <span class="dt">fill=</span>Var)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">15000</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">15000</span>, <span class="dv">3000</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Var, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">labeller =</span> <span class="kw">labeller</span>(<span class="dt">Var =</span> 
    <span class="kw">c</span>(<span class="st">&quot;In&quot;</span> =<span class="st"> &quot;進站&quot;</span>, <span class="st">&quot;Out&quot;</span> =<span class="st"> &quot;出站&quot;</span>))) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;平均進出站人數&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>注意週日和週五、週六與平日的情形，汐科站平日進出站人數多於週日和週六；臺北和臺東的週末進出人數都多於週間平日。</p>
<p>針對上述的現象，我們決定以第一組特徵表現平日進出站人數與週六、日的不同。</p>
<p>以圖表示</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName<span class="op">==</span><span class="st">&quot;汐科&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;Var&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Count&quot;</span>, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(Var) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count=</span>Count<span class="op">/</span><span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>trnOpDateW, <span class="dt">y=</span>Count, <span class="dt">fill=</span>trnOpDateW, <span class="dt">group=</span>trnOpDateW)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x=</span>trnOpDateW, <span class="dt">label=</span><span class="kw">round</span>(Count, <span class="dv">3</span>)), <span class="dt">y=</span><span class="fl">0.04</span>, <span class="dt">colour=</span><span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.2</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="fl">0.2</span>, <span class="fl">0.02</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Var, <span class="dt">nrow=</span><span class="dv">2</span>, <span class="dt">labeller =</span> <span class="kw">labeller</span>(<span class="dt">Var =</span> 
    <span class="kw">c</span>(<span class="st">&quot;In&quot;</span> =<span class="st"> &quot;進站&quot;</span>, <span class="st">&quot;Out&quot;</span> =<span class="st"> &quot;出站&quot;</span>))) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;特徵&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>同學可自行練習臺北和臺東的情形。</p>
<p>產生所有車站第一組特徵的程式碼如下：</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf1 &lt;-<span class="st"> </span>df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>Var, <span class="dt">value=</span>Value, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(staName, Var) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Value=</span>Value<span class="op">/</span><span class="kw">sum</span>(Value)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unite</span>(temp, trnOpDateW, Var) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">temp=</span><span class="kw">paste0</span>(temp,<span class="st">&quot;_w&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key=</span>temp, <span class="dt">value=</span>Value) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.numeric, scale)</code></pre></div>
<p>另外，週五、週六和週日的情形，臺東站的週日進站多於出站，週五和週六則相反；臺北站的週五和週六則是進站多於出站。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName<span class="op">==</span><span class="st">&quot;臺東&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;Var&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Count&quot;</span>, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Var, <span class="dt">y=</span>Count, <span class="dt">fill=</span>Var)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">15000</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">15000</span>, <span class="dv">3000</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;In&quot;</span>=<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;Out&quot;</span>=<span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>trnOpDateW, <span class="dt">nrow=</span><span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;平均進出站人數&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>),
        <span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>因此，以第二組特徵表現每日進出站人數的不同。以圖表示</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(staName<span class="op">==</span><span class="st">&quot;臺東&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span><span class="st">&quot;Var&quot;</span>, <span class="dt">value=</span><span class="st">&quot;Count&quot;</span>, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count=</span>Count<span class="op">/</span><span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Var, <span class="dt">y=</span>Count, <span class="dt">fill=</span>Var)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Var, <span class="dt">label=</span><span class="kw">round</span>(Count, <span class="dv">2</span>)), <span class="dt">y=</span><span class="fl">0.2</span>, <span class="dt">colour=</span><span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.6</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="fl">0.6</span>, <span class="fl">0.05</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;In&quot;</span>=<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;Out&quot;</span>=<span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>trnOpDateW, <span class="dt">nrow=</span><span class="dv">2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;特徵&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>同學可自行練習臺北的情形。</p>
<p>產生所有車站第二組特徵的程式碼如下</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf2 &lt;-<span class="st"> </span>df1 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>Var, <span class="dt">value=</span>Value, <span class="op">-</span>staName, <span class="op">-</span>trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(staName, trnOpDateW) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Value=</span>Value<span class="op">/</span><span class="kw">sum</span>(Value)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">unite</span>(temp, trnOpDateW, Var) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">temp=</span><span class="kw">paste0</span>(temp,<span class="st">&quot;_io&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key=</span>temp, <span class="dt">value=</span>Value) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.numeric, scale)</code></pre></div>
<p>將兩組特徵合併</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf &lt;-<span class="st"> </span><span class="kw">inner_join</span>(sta_inf1, sta_inf2)</code></pre></div>
<pre><code>## Joining, by = &quot;staName&quot;</code></pre>
<p>檢視產生的資料</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(sta_inf)</code></pre></div>
<pre><code>##    staName              Fri_In_w.V1         Fri_Out_w.V1    
##  Length:36          Min.   :-1.137213   Min.   :-1.7665676  
##  Class :character   1st Qu.:-0.580205   1st Qu.:-0.7275865  
##  Mode  :character   Median :-0.164465   Median :-0.2231931  
##                     Mean   : 0.000000   Mean   : 0.0000000  
##                     3rd Qu.: 0.184957   3rd Qu.: 0.6557545  
##                     Max.   : 4.270252   Max.   : 2.8881044  
##      Mon_In_w.V1          Mon_Out_w.V1         Sat_In_w.V1    
##  Min.   :-2.7393237   Min.   :-2.1078345   Min.   :-3.177105  
##  1st Qu.:-0.5942250   1st Qu.:-0.6986018   1st Qu.:-0.596975  
##  Median :-0.1207007   Median :-0.0420396   Median : 0.091662  
##  Mean   : 0.0000000   Mean   : 0.0000000   Mean   : 0.000000  
##  3rd Qu.: 0.5517940   3rd Qu.: 0.4934391   3rd Qu.: 0.661233  
##  Max.   : 2.8617230   Max.   : 2.9480380   Max.   : 1.902363  
##     Sat_Out_w.V1         Sun_In_w.V1          Sun_Out_w.V1    
##  Min.   :-3.175321   Min.   :-2.5122130   Min.   :-2.5341407  
##  1st Qu.:-0.565203   1st Qu.:-0.5883317   1st Qu.:-0.5509623  
##  Median : 0.156139   Median : 0.0837399   Median : 0.0373610  
##  Mean   : 0.000000   Mean   : 0.0000000   Mean   : 0.0000000  
##  3rd Qu.: 0.758674   3rd Qu.: 0.5736051   3rd Qu.: 0.6947417  
##  Max.   : 1.921921   Max.   : 1.9511888   Max.   : 2.2275010  
##      Thu_In_w.V1          Thu_Out_w.V1         Tue_In_w.V1     
##  Min.   :-1.5897829   Min.   :-1.9779224   Min.   :-1.9342333  
##  1st Qu.:-0.6330854   1st Qu.:-0.6257070   1st Qu.:-0.7252968  
##  Median :-0.0403080   Median :-0.1589686   Median : 0.0515242  
##  Mean   : 0.0000000   Mean   : 0.0000000   Mean   : 0.0000000  
##  3rd Qu.: 0.6166313   3rd Qu.: 0.5466750   3rd Qu.: 0.6496316  
##  Max.   : 2.9059590   Max.   : 2.8735917   Max.   : 2.6076879  
##      Tue_Out_w.V1         Wed_In_w.V1          Wed_Out_w.V1    
##  Min.   :-1.6414762   Min.   :-1.9359738   Min.   :-1.7333652  
##  1st Qu.:-0.6936470   1st Qu.:-0.6788329   1st Qu.:-0.6510228  
##  Median : 0.0105515   Median : 0.0013033   Median : 0.0330708  
##  Mean   : 0.0000000   Mean   : 0.0000000   Mean   : 0.0000000  
##  3rd Qu.: 0.5675877   3rd Qu.: 0.6481420   3rd Qu.: 0.6535733  
##  Max.   : 2.5503179   Max.   : 2.4679686   Max.   : 2.6424812  
##     Fri_In_io.V1        Fri_Out_io.V1        Mon_In_io.V1    
##  Min.   :-1.756365   Min.   :-3.607467   Min.   :-2.2803369  
##  1st Qu.:-0.485103   1st Qu.:-0.449949   1st Qu.:-0.5419042  
##  Median : 0.039681   Median :-0.039681   Median :-0.0889000  
##  Mean   : 0.000000   Mean   : 0.000000   Mean   : 0.0000000  
##  3rd Qu.: 0.449949   3rd Qu.: 0.485103   3rd Qu.: 0.5515968  
##  Max.   : 3.607467   Max.   : 1.756365   Max.   : 2.4422621  
##     Mon_Out_io.V1         Sat_In_io.V1        Sat_Out_io.V1    
##  Min.   :-2.4422621   Min.   :-2.5118534   Min.   :-2.6117308  
##  1st Qu.:-0.5515968   1st Qu.:-0.5824306   1st Qu.:-0.5203343  
##  Median : 0.0889000   Median : 0.0932289   Median :-0.0932289  
##  Mean   : 0.0000000   Mean   : 0.0000000   Mean   : 0.0000000  
##  3rd Qu.: 0.5419042   3rd Qu.: 0.5203343   3rd Qu.: 0.5824306  
##  Max.   : 2.2803369   Max.   : 2.6117308   Max.   : 2.5118534  
##      Sun_In_io.V1        Sun_Out_io.V1         Thu_In_io.V1    
##  Min.   :-1.2878133   Min.   :-2.3977813   Min.   :-1.9926554  
##  1st Qu.:-0.8182225   1st Qu.:-0.4822528   1st Qu.:-0.5486100  
##  Median :-0.2676783   Median : 0.2676783   Median :-0.0904832  
##  Mean   : 0.0000000   Mean   : 0.0000000   Mean   : 0.0000000  
##  3rd Qu.: 0.4822528   3rd Qu.: 0.8182225   3rd Qu.: 0.4468052  
##  Max.   : 2.3977813   Max.   : 1.2878133   Max.   : 2.9487651  
##     Thu_Out_io.V1        Tue_In_io.V1        Tue_Out_io.V1   
##  Min.   :-2.9487651   Min.   :-2.346267   Min.   :-3.463217  
##  1st Qu.:-0.4468052   1st Qu.:-0.443204   1st Qu.:-0.446770  
##  Median : 0.0904832   Median :-0.218721   Median : 0.218721  
##  Mean   : 0.0000000   Mean   : 0.000000   Mean   : 0.000000  
##  3rd Qu.: 0.5486100   3rd Qu.: 0.446770   3rd Qu.: 0.443204  
##  Max.   : 1.9926554   Max.   : 3.463217   Max.   : 2.346267  
##      Wed_In_io.V1        Wed_Out_io.V1    
##  Min.   :-2.0989731   Min.   :-2.8810202  
##  1st Qu.:-0.4592394   1st Qu.:-0.3776252  
##  Median :-0.1743385   Median : 0.1743385  
##  Mean   : 0.0000000   Mean   : 0.0000000  
##  3rd Qu.: 0.3776252   3rd Qu.: 0.4592394  
##  Max.   : 2.8810202   Max.   : 2.0989731</code></pre>
<p>取出各站點的特徵(第2到最後一個variable)，形成特徵矩陣，用來計算站點間的相似性，也就是估計矩陣的列(row)與列是否相似。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf.mat &lt;-<span class="st"> </span>sta_inf <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(.)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as.matrix</span>()</code></pre></div>
</div>
<div id="section-7.2.5" class="section level3">
<h3><span class="header-section-number">7.2.5</span> 維度縮減</h3>
<p>上面產生的特徵共有28個維度(dimensions)，也就是28個variables。在計算站點間的相似性之前，可以先看看是否可以用比較少的維度，便達到相近的計算結果。這個從高維度轉換成低維度的運算稱為<strong>維度縮減 (dimension reduction)</strong>，是資料探勘中相當重要的步驟。許多研究對於維度縮減提出相當多不同的方法，在此我們選用<strong>主成分分析 (principal component analysis, pca)</strong>。</p>
<p>將資料特徵輸入R語言的主成分分析函數<code>prcomp()</code>。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf.pca &lt;-<span class="st"> </span><span class="kw">prcomp</span>(sta_inf.mat)</code></pre></div>
<p>主成分分析產生的結果為一組與原先相同維度的矩陣，以上例而言，其結果在<code>sta_inf.pca$x</code>。經過主成分分析後，第一個維度的特徵(稱為PC1)是最重要的資料描述方式，其次是最二個維度的特徵(PC2)，依序下來為PC3、PC4、…。</p>
<p>查看主成分分析產生結果的解釋</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(sta_inf.pca)</code></pre></div>
<pre><code>## Importance of components:
##                          PC1    PC2    PC3     PC4     PC5     PC6     PC7
## Standard deviation     3.502 2.7433 2.3952 1.04166 0.67951 0.65438 0.45857
## Proportion of Variance 0.438 0.2688 0.2049 0.03875 0.01649 0.01529 0.00751
## Cumulative Proportion  0.438 0.7068 0.9117 0.95043 0.96692 0.98221 0.98972
##                            PC8     PC9    PC10    PC11    PC12    PC13
## Standard deviation     0.34455 0.27119 0.21747 0.17176 0.09662 0.08715
## Proportion of Variance 0.00424 0.00263 0.00169 0.00105 0.00033 0.00027
## Cumulative Proportion  0.99396 0.99659 0.99828 0.99933 0.99967 0.99994
##                           PC14    PC15    PC16     PC17     PC18     PC19
## Standard deviation     0.03476 0.01780 0.01189 0.007833 0.005235 0.003274
## Proportion of Variance 0.00004 0.00001 0.00001 0.000000 0.000000 0.000000
## Cumulative Proportion  0.99998 0.99999 1.00000 1.000000 1.000000 1.000000
##                             PC20      PC21    PC22      PC23      PC24
## Standard deviation     3.012e-15 2.943e-15 2.6e-15 2.228e-15 1.759e-15
## Proportion of Variance 0.000e+00 0.000e+00 0.0e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.000e+00 1.0e+00 1.000e+00 1.000e+00
##                             PC25     PC26      PC27      PC28
## Standard deviation     1.326e-15 8.82e-16 5.688e-16 3.186e-16
## Proportion of Variance 0.000e+00 0.00e+00 0.000e+00 0.000e+00
## Cumulative Proportion  1.000e+00 1.00e+00 1.000e+00 1.000e+00</code></pre>
<p>其中的Standard deviation是只用這個維度上的特徵的標準差，可以利用標準差計算變異數所佔的比例(Proportion of Varience)，以第一個維度(PC1)來說，變異數所佔的比例約為0.44，也就是只用第一個維度的特徵便可以表現0.44的訊息，因此第一個維度是最重要的資料描述方式。第二個維度的變異數所佔的比例比第一個維度小，但比其他維度大，所以在資料描述方式上，它是第二重要的。以下依此類推。並且前四個維度(PC1、PC2、PC3和PC4)的變異數比例累積(Cumulative Proportion)約為0.96，也就是說只使用這四個維度便可以表現整個資料訊息的0.96。所以，以下的分析將使用前四個維度。</p>
<p>將各個維度的變異數比例累積畫成圖形來看。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data.frame</span>(<span class="dt">dim_order=</span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(sta_inf.mat)),
           <span class="dt">var=</span>sta_inf.pca<span class="op">$</span>sdev<span class="op">^</span><span class="dv">2</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_varex=</span>var<span class="op">/</span><span class="kw">sum</span>(var)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cum_prop_varex=</span><span class="kw">cumsum</span>(prop_varex)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>dim_order, <span class="dt">y=</span>cum_prop_varex)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(sta_inf.mat)), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="kw">ncol</span>(sta_inf.mat), <span class="dv">1</span>), <span class="dt">minor_breaks =</span> <span class="ot">NULL</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;維度&quot;</span>, <span class="dt">y=</span><span class="st">&quot;累積變異數比例&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;gray&quot;</span>),
        <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;gray70&quot;</span>),
        <span class="dt">panel.grid.minor =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;gray90&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>取出經過前四個維度的資料。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf.pf &lt;-<span class="st"> </span>sta_inf.pca<span class="op">$</span>x[, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</code></pre></div>
</div>
<div id="section-7.2.6" class="section level3">
<h3><span class="header-section-number">7.2.6</span> 將站點依據彼此距離視覺化</h3>
<p>本節中將依據站點彼此間的相似性，將各站點映射到圖形上，使相似性較大的站點在圖形上的距離較近</p>
<p>載入映射演算法套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(Rtsne)</code></pre></div>
<p>計算站點之間的距離(相似性可以視為距離的負值，相似性愈大，距離愈小)。<code>dist()</code>提供矩陣的每列之間各種距離的計算方式，這裡我們採用內定而且是最常用的Euclidean distance(歐基里得距離)。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_d &lt;-<span class="st"> </span><span class="kw">dist</span>(sta_inf.pf)</code></pre></div>
<p>依據站點特徵之間的歐基里得距離計算站點映射在圖形上的位置</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tsne_out &lt;-<span class="st"> </span><span class="kw">Rtsne</span>(sta_d, <span class="dt">perplexity=</span><span class="dv">10</span>, <span class="dt">theta=</span><span class="fl">0.0</span>, <span class="dt">is_distance=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>tsne對每個資料產生它在圖形上的映射位置，其結果放在一個行數為2的矩陣Y上，每一列分別代表分別表示一個資料在圖形上的坐標。例如：前五個站點在圖形上的坐標為</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tsne_out<span class="op">$</span>Y[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,]</code></pre></div>
<pre><code>##           [,1]       [,2]
## [1,]  81.93088   1.915601
## [2,] -19.05071 -24.292169
## [3,]  45.98614  20.639244
## [4,] -59.14341 -11.221718
## [5,]  85.98876  15.748300</code></pre>
<p>將每個站點加上它映射的坐標後，依據其坐標畫成圖形</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(staName) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">x=</span>tsne_out<span class="op">$</span>Y[,<span class="dv">1</span>], <span class="dt">y=</span>tsne_out<span class="op">$</span>Y[,<span class="dv">2</span>]) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x=</span>x, <span class="dt">y=</span>y, <span class="dt">label=</span>staName), <span class="dt">size=</span><span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
<div id="section-7.2.7" class="section level3">
<h3><span class="header-section-number">7.2.7</span> 站點集群</h3>
<p>載入Affinity Propagation集群演算法套件</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(apcluster)</code></pre></div>
<p>AP集群演算法的輸入是資料項目間的相似性，所以我們利用前面計算得到的站點間的距離乘上-1，做為站點間的相似性。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s1 &lt;-<span class="st"> </span><span class="op">-</span><span class="dv">1</span><span class="op">*</span><span class="kw">as.matrix</span>(sta_d)</code></pre></div>
<p>將站點間的相似性輸入AP集群演算法</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res &lt;-<span class="st"> </span><span class="kw">apcluster</span>(s1, <span class="dt">q=</span><span class="fl">0.1</span>)</code></pre></div>
<p>顯示集群分析的結果。Number of clusters是集群數量，Clusters是每個集群的成員，Exemplars是每個集群的核心成員。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">show</span>(res)</code></pre></div>
<pre><code>## 
## APResult object
## 
## Number of samples     =  36 
## Number of iterations  =  132 
## Input preference      =  -10.88151 
## Sum of similarities   =  -99.88029 
## Sum of preferences    =  -43.52602 
## Net similarity        =  -143.4063 
## Number of clusters    =  4 
## 
## Exemplars:
##    5 7 15 31
## Clusters:
##    Cluster 1, exemplar 5:
##       1 5 6 12 26
##    Cluster 2, exemplar 7:
##       3 7 8 9 10 14 16 19 24 25 29 33 36
##    Cluster 3, exemplar 15:
##       11 15 23 27 30 34
##    Cluster 4, exemplar 31:
##       2 4 13 17 18 20 21 22 28 31 32 35</code></pre>
<p>查看每個集群內的站點</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq</span>(<span class="kw">length</span>(res<span class="op">@</span>clusters))) {
  <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;Cluster&quot;</span>, i))
  <span class="kw">print</span>(sta_inf1<span class="op">$</span>staName[res<span class="op">@</span>clusters[[i]]])
}</code></pre></div>
<pre><code>## [1] &quot;Cluster 1&quot;
## [1] &quot;七堵&quot; &quot;汐止&quot; &quot;汐科&quot; &quot;南港&quot; &quot;瑞芳&quot;
## [1] &quot;Cluster 2&quot;
##  [1] &quot;內壢&quot; &quot;竹北&quot; &quot;竹南&quot; &quot;松山&quot; &quot;板橋&quot; &quot;苗栗&quot; &quot;埔心&quot; &quot;基隆&quot; &quot;新豐&quot; &quot;楊梅&quot;
## [11] &quot;臺北&quot; &quot;樹林&quot; &quot;鶯歌&quot;
## [1] &quot;Cluster 3&quot;
## [1] &quot;花蓮&quot; &quot;員林&quot; &quot;新營&quot; &quot;嘉義&quot; &quot;臺東&quot; &quot;豐原&quot;
## [1] &quot;Cluster 4&quot;
##  [1] &quot;中壢&quot;   &quot;斗六&quot;   &quot;屏東&quot;   &quot;桃園&quot;   &quot;高雄&quot;   &quot;新左營&quot; &quot;新竹&quot;  
##  [8] &quot;新烏日&quot; &quot;臺中&quot;   &quot;臺南&quot;   &quot;鳳山&quot;   &quot;羅東&quot;</code></pre>
<p>將站點映射到相對應的坐標上，並以顏色區分它們的集群。</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(staName) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">x=</span>tsne_out<span class="op">$</span>Y[,<span class="dv">1</span>], <span class="dt">y=</span>tsne_out<span class="op">$</span>Y[,<span class="dv">2</span>]) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cl=</span><span class="kw">factor</span>(<span class="kw">labels</span>(res, <span class="dt">type=</span><span class="st">&quot;enum&quot;</span>))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x=</span>x, <span class="dt">y=</span>y, <span class="dt">label=</span>staName, <span class="dt">color=</span>cl), <span class="dt">size=</span><span class="dv">3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="kw">min</span>(tsne_out<span class="op">$</span>Y[,<span class="dv">1</span>])<span class="op">-</span><span class="dv">1</span>, <span class="kw">max</span>(tsne_out<span class="op">$</span>Y[,<span class="dv">1</span>])<span class="op">+</span><span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="kw">min</span>(tsne_out<span class="op">$</span>Y[,<span class="dv">2</span>])<span class="op">-</span><span class="dv">1</span>, <span class="kw">max</span>(tsne_out<span class="op">$</span>Y[,<span class="dv">2</span>])<span class="op">+</span><span class="dv">1</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,
        <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>))</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
</div>
<div id="section-7.2.8" class="section level3">
<h3><span class="header-section-number">7.2.8</span> 結果的解釋</h3>
<p>各集群的核心成員</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf<span class="op">$</span>staName[res<span class="op">@</span>exemplars]</code></pre></div>
<pre><code>## [1] &quot;汐止&quot; &quot;竹北&quot; &quot;員林&quot; &quot;臺南&quot;</code></pre>
<p>比較核心成員的第一組特徵：平日進出站人數與週六、日的不同</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sta_inf <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">slice</span>(res<span class="op">@</span>exemplars) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(staName, <span class="kw">ends_with</span>(<span class="st">&quot;w&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key=</span>Var, <span class="dt">value=</span>value, <span class="op">-</span>staName) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">trnOpDateW=</span><span class="kw">substr</span>(Var, <span class="dv">1</span>, <span class="dv">3</span>), <span class="dt">IO=</span><span class="kw">substr</span>(Var, <span class="dv">5</span>, <span class="kw">nchar</span>(Var)<span class="op">-</span><span class="dv">2</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">trnOpDateW=</span><span class="kw">factor</span>(trnOpDateW, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Mon&quot;</span>, <span class="st">&quot;Tue&quot;</span>, <span class="st">&quot;Wed&quot;</span>, <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Fri&quot;</span>, <span class="st">&quot;Sat&quot;</span>, <span class="st">&quot;Sun&quot;</span>), <span class="dt">ordered=</span><span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>(<span class="kw">aes</span>(<span class="dt">x=</span>trnOpDateW, <span class="dt">y=</span>value, <span class="dt">fill=</span>IO), <span class="dt">position=</span><span class="st">&quot;dodge&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y=</span><span class="st">&quot;人數比例&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;進出&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette=</span><span class="st">&quot;Dark2&quot;</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;進站&quot;</span>, <span class="st">&quot;出站&quot;</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>staName) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
<p>以下請分析各個集群表現的特色。建議：可以先從最右邊的集群開始分析。</p>
</div>
</div>
<div id="-5" class="section level2 unnumbered">
<h2>小結</h2>
<ul>
<li><p>本節探討集群分析。集群分析的目的是將具有相似特徵的資料聚集成群，使得群組內的資料有比較相似的特徵，反之，群組外的資料其特徵較不相似。</p></li>
<li><p>為了達到上述目的，研究人員發展出許多集群分析演算法，例如：K-means、EM、AHC、DBSCAN和本次課程中使用的AP集群分析演算法。不同的集群分析演算法來自不同的集群構想，適合應用在不同的問題。</p></li>
<li><p>除了集群分析演算法，另外會影響集群分析的結果還包括資料的特徵以及資料之間的特徵相似性測量。為了達到較有意義而有效的集群結果，往往需要對資料進行仔細的觀察，找出適當的特徵表示以及相似性測量方法。</p></li>
<li><p>集群分析後，還需要評估結果的優劣。常見的評估方法包括：群組內資料差距的平均以及Silhouette Value。</p></li>
</ul>
</div>
<div id="-5" class="section level2 unnumbered">
<h2>延伸思考</h2>
<ul>
<li><p>什麼樣性質的問題適合應用集群分析？</p></li>
<li><p>除了AP外，還有許多集群分析演算法，如何在R語言中找到適合的套件，並且應用這些套件撰寫程式？</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-mining.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="supervised-machine-learning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-unsuperivsed_ml.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
